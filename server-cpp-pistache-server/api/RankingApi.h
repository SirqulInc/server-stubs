/**
* Sirqul IoT Platform
* Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
*
* The version of the OpenAPI document: 3.16
* Contact: info@sirqul.com
*
* NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
* https://openapi-generator.tech
* Do not edit the class manually.
*/
/*
 * RankingApi.h
 *
 * 
 */

#ifndef RankingApi_H_
#define RankingApi_H_


#include "ApiBase.h"

#include <pistache/http.h>
#include <pistache/router.h>
#include <pistache/http_headers.h>

#include <optional>
#include <utility>

#include "RankFullResponse.h"
#include "SirqulResponse.h"
#include <nlohmann/json.hpp>
#include <string>

namespace org::openapitools::server::api
{

class  RankingApi : public ApiBase {
public:
    explicit RankingApi(const std::shared_ptr<Pistache::Rest::Router>& rtr);
    ~RankingApi() override = default;
    void init() override;

    static const std::string base;

private:
    void setupRoutes();

    void get_historical_rankings_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void get_rankings_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void get_user_rank_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void override_user_rank_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void update_rankings_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void ranking_api_default_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleParsingException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleParsingException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleOperationException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleOperationException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Search Historical Rankings
    /// </summary>
    /// <remarks>
    /// Get historical leaderboard rankings by time-frame.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="appKey">the application key for filtering results by application</param>
    /// <param name="rankType">the rank type to return</param>
    /// <param name="startDate">timestamp in milliseconds to filter results with</param>
    /// <param name="endDate">timestamp in milliseconds to filter results with</param>
    /// <param name="deviceId">a unique id given by the device (deviceId or accountId required) (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">the account id of the user (optional, default to 0L)</param>
    /// <param name="sortField">determines how to order and rank the results. Possible values include: TOTAL, MONTHLY, WEEKLY, DAILY, TOP, LOWEST (optional, default to &quot;TOTAL&quot;)</param>
    /// <param name="descending">determines whether to return results in ascending or descending order (optional, default to true)</param>
    /// <param name="start">the start index for pagination (optional, default to 0)</param>
    /// <param name="limit">the limit for pagination (optional, default to 100)</param>
    virtual void get_historical_rankings( const double &version, const std::optional<std::string> &appKey, const std::optional<std::string> &rankType, const std::optional<int64_t> &startDate, const std::optional<int64_t> &endDate, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &sortField, const std::optional<bool> &descending, const std::optional<int32_t> &start, const std::optional<int32_t> &limit, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Search Rankings
    /// </summary>
    /// <remarks>
    /// Get leader board rankings. This is an all in one endpoint that can return multiple ranking types and also the current user rank.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="deviceId">a unique id given by the device (deviceId or accountId required) (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">the account id of the user (deviceId or accountId required) (optional, default to 0L)</param>
    /// <param name="gameType">This parameter is deprecated. (optional, default to &quot;&quot;)</param>
    /// <param name="appKey">the application key for filtering results by application (required for non-EXECUTIVE users) (optional, default to &quot;&quot;)</param>
    /// <param name="q">This parameter is deprecated. (optional, default to &quot;&quot;)</param>
    /// <param name="keyword">keyword to search for (optional, default to &quot;&quot;)</param>
    /// <param name="rankType">a comma separated list of rank types to return. Possible default rank types: POINTS, DOWNLOADS, INVITATIONS (optional, default to &quot;POINTS,DOWNLOADS,INVITATIONS&quot;)</param>
    /// <param name="leaderboardMode">the type of search to perform. Possible values include: GLOBAL - searches scores globally (all users in the system are included in the ranking) LOCAL - filters results by select users and on users that have logged into the same device CUSTOM - allows for custom filtering using the params: withinAccountIds, albumId, audienceId (optional, default to &quot;GLOBAL&quot;)</param>
    /// <param name="withinAccountIds">comma separated list of account ids. If performing a LOCAL or CUSTOM search, the query will include these accounts. (optional, default to &quot;&quot;)</param>
    /// <param name="returnUserRank">determines whether to return the user&#39;s current rank in the response. This can be turned off for sequential paginated requests. (optional, default to true)</param>
    /// <param name="albumId">album id to use when performing CUSTOM filters (optional, default to 0L)</param>
    /// <param name="audienceId">audience id to use when performing CUSTOM filters (optional, default to 0L)</param>
    /// <param name="sortField">determines how to order and rank the results. Possible values include: TOTAL - order results by total score MONTHLY - order results by monthly score WEEKLY - order results by weekly score DAILY - order results by daily score TOP - order results by top score LOWEST - order results by lowest score (optional, default to &quot;TOTAL&quot;)</param>
    /// <param name="descending">determines whether to return results in ascending or descending order (optional, default to true)</param>
    /// <param name="i">This parameter is deprecated. (optional, default to 0)</param>
    /// <param name="start">the start index for pagination (optional, default to 0)</param>
    /// <param name="l">This parameter is deprecated. (optional, default to 0)</param>
    /// <param name="limit">the limit for pagination (optional, default to 100)</param>
    virtual void get_rankings( const double &version, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &gameType, const std::optional<std::string> &appKey, const std::optional<std::string> &q, const std::optional<std::string> &keyword, const std::optional<std::string> &rankType, const std::optional<std::string> &leaderboardMode, const std::optional<std::string> &withinAccountIds, const std::optional<bool> &returnUserRank, const std::optional<int64_t> &albumId, const std::optional<int64_t> &audienceId, const std::optional<std::string> &sortField, const std::optional<bool> &descending, const std::optional<int32_t> &i, const std::optional<int32_t> &start, const std::optional<int32_t> &l, const std::optional<int32_t> &limit, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Get Personal Rankings
    /// </summary>
    /// <remarks>
    /// Returns the user&#39;s ranks for one or more rank types and modes.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="deviceId">a unique id given by the device (deviceId or accountId required) (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">the account id of the user (optional, default to 0L)</param>
    /// <param name="appKey">the application key for filtering results by application (required) (optional, default to &quot;&quot;)</param>
    /// <param name="rankType">pass in all rankTypes and children rankTypes (optional, default to &quot;&quot;)</param>
    /// <param name="returnUserRank">determines whether to return the user&#39;s current rank in the response, for each rankType (optional, default to false)</param>
    /// <param name="leaderboardMode">the type of search to perform. Possible values include: GLOBAL, LOCAL, SEARCH, CUSTOM (optional, default to &quot;GLOBAL&quot;)</param>
    /// <param name="sortField">determines how to order and rank the results. Possible values include: TOTAL, MONTHLY, WEEKLY, DAILY, TOP, LOWEST (optional, default to &quot;TOTAL&quot;)</param>
    /// <param name="keyword">keyword to search for (on rankType) (optional, default to &quot;&quot;)</param>
    /// <param name="descending">determines whether to return results in descending order (optional, default to true)</param>
    /// <param name="start">the start index for pagination (optional, default to 0)</param>
    /// <param name="limit">the limit for pagination (optional, default to 100)</param>
    virtual void get_user_rank( const double &version, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &appKey, const std::optional<std::string> &rankType, const std::optional<bool> &returnUserRank, const std::optional<std::string> &leaderboardMode, const std::optional<std::string> &sortField, const std::optional<std::string> &keyword, const std::optional<bool> &descending, const std::optional<int32_t> &start, const std::optional<int32_t> &limit, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Override User Rank
    /// </summary>
    /// <remarks>
    /// Allows an admin of an application to override a user&#39;s scores for a leaderboard.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="accountId">the logged in user&#39;s account id (must have permissions to manage data for the application)</param>
    /// <param name="ownerAccountId">the end user&#39;s account id to override</param>
    /// <param name="appKey">the application key the leaderboard is for</param>
    /// <param name="rankType">the rankType of the leaderboard</param>
    /// <param name="totalScore">the total score to update (optional, default to 0L)</param>
    /// <param name="totalCount">the total count to update (optional, default to 0L)</param>
    /// <param name="totalTime">the total time to update (optional, default to 0L)</param>
    /// <param name="dailyScore">the daily score to update (optional, default to 0L)</param>
    /// <param name="dailyCount">the daily count to update (optional, default to 0L)</param>
    /// <param name="dailyTime">the daily time to update (optional, default to 0L)</param>
    /// <param name="weeklyScore">the weekly score to update (optional, default to 0L)</param>
    /// <param name="weeklyCount">the weekly count to update (optional, default to 0L)</param>
    /// <param name="weeklyTime">the weekly time to update (optional, default to 0L)</param>
    /// <param name="monthlyScore">the monthly score to update (optional, default to 0L)</param>
    /// <param name="monthlyCount">the monthly count to update (optional, default to 0L)</param>
    /// <param name="monthlyTime">the monthly time to update (optional, default to 0L)</param>
    /// <param name="topScore">the top score to update (optional, default to 0L)</param>
    /// <param name="lowestScore">the lowest score to update (optional, default to 0L)</param>
    /// <param name="streakCount">the streak count to update (optional, default to 0L)</param>
    /// <param name="streakBestCount">the best streak count to update (optional, default to 0L)</param>
    /// <param name="startDate">the start date to update (optional, default to 0L)</param>
    /// <param name="endDate">the end date to update (optional, default to 0L)</param>
    virtual void override_user_rank( const double &version, const std::optional<int64_t> &accountId, const std::optional<int64_t> &ownerAccountId, const std::optional<std::string> &appKey, const std::optional<std::string> &rankType, const std::optional<int64_t> &totalScore, const std::optional<int64_t> &totalCount, const std::optional<int64_t> &totalTime, const std::optional<int64_t> &dailyScore, const std::optional<int64_t> &dailyCount, const std::optional<int64_t> &dailyTime, const std::optional<int64_t> &weeklyScore, const std::optional<int64_t> &weeklyCount, const std::optional<int64_t> &weeklyTime, const std::optional<int64_t> &monthlyScore, const std::optional<int64_t> &monthlyCount, const std::optional<int64_t> &monthlyTime, const std::optional<int64_t> &topScore, const std::optional<int64_t> &lowestScore, const std::optional<int64_t> &streakCount, const std::optional<int64_t> &streakBestCount, const std::optional<int64_t> &startDate, const std::optional<int64_t> &endDate, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Update Ranking
    /// </summary>
    /// <remarks>
    /// Update the rank value 
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="accountId">the account id of the user</param>
    /// <param name="appKey">the application key for filtering results by application</param>
    /// <param name="rankType">a unique label for identifying the ranking. This can be any alphanumeric string (no spaces or special characters) with a maximum length of 64 characters. There are also default rank types to use which include: POINTS, DOWNLOADS, INVITATIONS, CREATIONS, VOTES, REDEEMED, ACTIONS</param>
    /// <param name="increment">the value to increment (optional, default to 1L)</param>
    /// <param name="timeIncrement">the time value to increment (optional, default to 0L)</param>
    /// <param name="tag">the analytic tag for this achievement (used to validate scores) (optional, default to &quot;&quot;)</param>
    /// <param name="startDate">custom date you can save along with the score for the user (optional, default to 0L)</param>
    /// <param name="endDate">custom date you can save along with the score for the user (optional, default to 0L)</param>
    /// <param name="updateGlobal">update the global rankings if true, default is false (optional, default to false)</param>
    /// <param name="createLeaderboard">create the leaderboard if it does not exist (default false) (optional, default to false)</param>
    virtual void update_rankings( const double &version, const std::optional<int64_t> &accountId, const std::optional<std::string> &appKey, const std::optional<std::string> &rankType, const std::optional<int64_t> &increment, const std::optional<int64_t> &timeIncrement, const std::optional<std::string> &tag, const std::optional<int64_t> &startDate, const std::optional<int64_t> &endDate, const std::optional<bool> &updateGlobal, const std::optional<bool> &createLeaderboard, Pistache::Http::ResponseWriter &response) = 0;

};

} // namespace org::openapitools::server::api

#endif /* RankingApi_H_ */

