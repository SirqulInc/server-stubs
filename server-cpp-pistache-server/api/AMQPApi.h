/**
* Sirqul IoT Platform
* Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
*
* The version of the OpenAPI document: 3.16
* Contact: info@sirqul.com
*
* NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
* https://openapi-generator.tech
* Do not edit the class manually.
*/
/*
 * AMQPApi.h
 *
 * 
 */

#ifndef AMQPApi_H_
#define AMQPApi_H_


#include "ApiBase.h"

#include <pistache/http.h>
#include <pistache/router.h>
#include <pistache/http_headers.h>

#include <optional>
#include <utility>

#include "QueueResponse.h"
#include "SirqulResponse.h"
#include <string>

namespace org::openapitools::server::api
{

class  AMQPApi : public ApiBase {
public:
    explicit AMQPApi(const std::shared_ptr<Pistache::Rest::Router>& rtr);
    ~AMQPApi() override = default;
    void init() override;

    static const std::string base;

private:
    void setupRoutes();

    void consumer_create_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void consumer_update_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_create_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_delete_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_get_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_publish_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_search_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void queue_update_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void amqp_api_default_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleParsingException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleParsingException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleOperationException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleOperationException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Create Consumer
    /// </summary>
    /// <remarks>
    /// Create a connection to an existing amqp queue and register as a consumer.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="appKey">The application key to use when creating an analytic or service request. The account needs to have permissions to the applicaton or it will be denied.</param>
    /// <param name="name">The name of the queue to connect to</param>
    /// <param name="hostname">The hostname of the server the queue is hosted on</param>
    /// <param name="username">The username to access the server the queue is hosted on</param>
    /// <param name="password">The password to access the queue to connect to</param>
    /// <param name="dataMapping">The data mapping information in the format of AMQPRequest</param>
    /// <param name="deviceId">The client deviceID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="port">The port of the server the queue is hosted on (optional, default to 5672)</param>
    /// <param name="virtualHost">The virtual host defined on the server the queue is associated on (optional, default to &quot;&quot;)</param>
    /// <param name="exchanger">The exchanger of the queue to connect to (optional, default to &quot;&quot;)</param>
    /// <param name="exchangerType">The exchanger type of the queue to connect to (optional, default to &quot;&quot;)</param>
    /// <param name="workers">The number of workers to generate  (optional, default to 1)</param>
    /// <param name="useSSL">Use SSL (optional, default to false)</param>
    virtual void consumer_create( const double &version, const std::optional<std::string> &appKey, const std::optional<std::string> &name, const std::optional<std::string> &hostname, const std::optional<std::string> &username, const std::optional<std::string> &password, const std::optional<std::string> &dataMapping, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int32_t> &port, const std::optional<std::string> &virtualHost, const std::optional<std::string> &exchanger, const std::optional<std::string> &exchangerType, const std::optional<int32_t> &workers, const std::optional<bool> &useSSL, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Update Consumer
    /// </summary>
    /// <remarks>
    /// Update an existing amqp queue&#39;s data mapping.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="appKey">The application key to use when creating an analytic or service request. The account needs to have permissions to the applicaton or it will be denied.</param>
    /// <param name="queueId">The queue to update</param>
    /// <param name="dataMapping">The data mapping information in the format of AMQPRequest</param>
    /// <param name="deviceId">The client deviceID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="useSSL">Use SSL (optional, default to false)</param>
    virtual void consumer_update( const double &version, const std::optional<std::string> &appKey, const std::optional<int64_t> &queueId, const std::optional<std::string> &dataMapping, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<bool> &useSSL, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Create Queue
    /// </summary>
    /// <remarks>
    /// Create a basic AMQP queue. If the username and password and virtual host is not sepcified, the queue will be created on the virtual host assigned to the application.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="appKey">The application key unique to each application.</param>
    /// <param name="name">The name of the queue to create</param>
    /// <param name="deviceId">The client deviceID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="workers">The number of workers to generate  (optional, default to 1)</param>
    /// <param name="analyticTags">If provided the analytic processing will publsih to this queue instead of the default one for the provided list of tags (optional, default to &quot;&quot;)</param>
    /// <param name="hostname">The hostname of the server the queue is hosted on (optional, default to &quot;&quot;)</param>
    /// <param name="port">The port of the server the queue is hosted on (optional, default to 0)</param>
    /// <param name="username">The username to access the server that the queue is on (optional, default to &quot;&quot;)</param>
    /// <param name="password">The password to access the queue to connect to (optional, default to &quot;&quot;)</param>
    /// <param name="virtualHost">The virtual host defined on the server to queue (optional, default to &quot;&quot;)</param>
    /// <param name="useSSL">Use SSL (optional, default to false)</param>
    virtual void queue_create( const double &version, const std::optional<std::string> &appKey, const std::optional<std::string> &name, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int32_t> &workers, const std::optional<std::string> &analyticTags, const std::optional<std::string> &hostname, const std::optional<int32_t> &port, const std::optional<std::string> &username, const std::optional<std::string> &password, const std::optional<std::string> &virtualHost, const std::optional<bool> &useSSL, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Delete Queue
    /// </summary>
    /// <remarks>
    /// Delete the stored queue record and close any active connections to the AMQP servers.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="queueId">The id of the queue to find</param>
    /// <param name="deviceId">The client device ID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    virtual void queue_delete( const double &version, const std::optional<int64_t> &queueId, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Get Queue
    /// </summary>
    /// <remarks>
    /// Get the stored queue record. Must supply the queueId, or the name and hostname and virtualHost, or the name and appKey to find the record.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="deviceId">The client device ID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="queueId">The id of the queue to find (optional, default to 0L)</param>
    /// <param name="appKey">The application key the queue was assigned to (optional, default to &quot;&quot;)</param>
    /// <param name="name">The name of the queue to find (optional, default to &quot;&quot;)</param>
    /// <param name="hostname">The hostname of the queue to find (optional, default to &quot;&quot;)</param>
    /// <param name="virtualHost">The virtual host of the queue to find (optional, default to &quot;&quot;)</param>
    virtual void queue_get( const double &version, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int64_t> &queueId, const std::optional<std::string> &appKey, const std::optional<std::string> &name, const std::optional<std::string> &hostname, const std::optional<std::string> &virtualHost, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Publish Queue
    /// </summary>
    /// <remarks>
    /// Publish a message to a stored queue. Must supply the queueId, or the name and hostname and virtualHost, or the name and appKey to find the record.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="message">The payload to send to the queue</param>
    /// <param name="queueId">The id of the queue to publish to (optional, default to 0L)</param>
    /// <param name="appKey">The application key the queue was assigned to (optional, default to &quot;&quot;)</param>
    /// <param name="name">The name of the queue to publish to or the analytic tag to handle if the analytic param is true (optional, default to &quot;&quot;)</param>
    /// <param name="hostname">The hostname of the server the queue is hosted on (optional, default to &quot;&quot;)</param>
    /// <param name="virtualHost">The virtual host defined on the server to queue (optional, default to &quot;&quot;)</param>
    virtual void queue_publish( const double &version, const std::optional<std::string> &message, const std::optional<int64_t> &queueId, const std::optional<std::string> &appKey, const std::optional<std::string> &name, const std::optional<std::string> &hostname, const std::optional<std::string> &virtualHost, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Search Queue
    /// </summary>
    /// <remarks>
    /// Get the queues setup for the BillableEntity&#39;s applications.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="queueId">The id of the queue to find (optional, default to 0L)</param>
    /// <param name="deviceId">The client device ID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="name">The name of the queue to find (optional, default to &quot;&quot;)</param>
    /// <param name="start">Start of the index (optional, default to 0)</param>
    /// <param name="limit">Limit of the index (optional, default to 10)</param>
    virtual void queue_search( const double &version, const std::optional<int64_t> &queueId, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &name, const std::optional<int32_t> &start, const std::optional<int32_t> &limit, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Update Queue
    /// </summary>
    /// <remarks>
    /// Update the basic AMQP queue.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="queueId">The id of the queue to update</param>
    /// <param name="deviceId">The client deviceID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="appKey">The application key unique to each application. (optional, default to &quot;&quot;)</param>
    /// <param name="workers">The number of workers to generate (optional, default to 0)</param>
    /// <param name="analyticTags">If provided the analytic processing will publsih to this queue instead of the default one for the provided list of tags (optional, default to &quot;&quot;)</param>
    /// <param name="hostname">The hostname of the server the queue is hosted on (optional, default to &quot;&quot;)</param>
    /// <param name="port">The port of the server the queue is hosted on (optional, default to 0)</param>
    /// <param name="username">The username to access the server that the queue is on (optional, default to &quot;&quot;)</param>
    /// <param name="password">The password to access the queue to connect to (optional, default to &quot;&quot;)</param>
    /// <param name="virtualHost">The virtual host defined on the server to queue (optional, default to &quot;&quot;)</param>
    /// <param name="useSSL">the SSL to use (optional, default to false)</param>
    virtual void queue_update( const double &version, const std::optional<int64_t> &queueId, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &appKey, const std::optional<int32_t> &workers, const std::optional<std::string> &analyticTags, const std::optional<std::string> &hostname, const std::optional<int32_t> &port, const std::optional<std::string> &username, const std::optional<std::string> &password, const std::optional<std::string> &virtualHost, const std::optional<bool> &useSSL, Pistache::Http::ResponseWriter &response) = 0;

};

} // namespace org::openapitools::server::api

#endif /* AMQPApi_H_ */

