/**
* Sirqul IoT Platform
* Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
*
* The version of the OpenAPI document: 3.16
* Contact: info@sirqul.com
*
* NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
* https://openapi-generator.tech
* Do not edit the class manually.
*/
/*
 * AnalyticsApi.h
 *
 * 
 */

#ifndef AnalyticsApi_H_
#define AnalyticsApi_H_


#include "ApiBase.h"

#include <pistache/http.h>
#include <pistache/router.h>
#include <pistache/http_headers.h>

#include <optional>
#include <utility>

#include "ChartData.h"
#include "SirqulResponse.h"
#include "UserActivityResponse.h"
#include <string>
#include <vector>

namespace org::openapitools::server::api
{

class  AnalyticsApi : public ApiBase {
public:
    explicit AnalyticsApi(const std::shared_ptr<Pistache::Rest::Router>& rtr);
    ~AnalyticsApi() override = default;
    void init() override;

    static const std::string base;

private:
    void setupRoutes();

    void activities_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void aggregated_filtered_usage_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void filtered_usage_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void usage_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void usage_batch_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);
    void analytics_api_default_handler(const Pistache::Rest::Request &request, Pistache::Http::ResponseWriter response);

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleParsingException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during Parameter parsing and validation.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleParsingException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual void handleOperationException(const std::exception& ex, Pistache::Http::ResponseWriter &response) const noexcept;

    /// <summary>
    /// Helper function to handle unexpected Exceptions during processing of the request in handler functions.
    /// May be overridden to return custom error formats. This is called inside a catch block.
    /// Important: When overriding, do not call `throw ex;`, but instead use `throw;`.
    /// </summary>
    virtual std::pair<Pistache::Http::Code, std::string> handleOperationException(const std::exception& ex) const noexcept;

    /// <summary>
    /// Get User Activity
    /// </summary>
    /// <remarks>
    /// Get an activity feed by user.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="start">The start of the pagination</param>
    /// <param name="limit">The limit of the pagination</param>
    /// <param name="accountId">the account id of the user</param>
    virtual void activities( const double &version, const std::optional<int32_t> &start, const std::optional<int32_t> &limit, const std::optional<int64_t> &accountId, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Get Aggregated Filtered Usage
    /// </summary>
    /// <remarks>
    /// Query analytics to get data used for nested graphs and charts
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="deviceId">The unique id of the device making the request (deviceId or accountId required) (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The account id of the user (deviceId or accountId required) (optional, default to 0L)</param>
    /// <param name="applicationId">This parameter is deprecated. (optional, default to 0L)</param>
    /// <param name="appKey">The application key used to filter results by application (optional, default to &quot;&quot;)</param>
    /// <param name="startDate">Used to search for results after or equal to this date (UNIX time-stamp in milliseconds) (optional, default to 0L)</param>
    /// <param name="endDate">Used to search for results before or equal to this date (UNIX time-stamp in milliseconds) (optional, default to 0L)</param>
    /// <param name="deviceType">The device type to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="device">The device to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="deviceOS">The device OS to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="gender">The gender to filter results by {MALE, FEMALE} (optional, default to &quot;&quot;)</param>
    /// <param name="ageGroup">Comma separated list of age groups to filter by {AGE_0_13, AGE_14_17, AGE_18_22, AGE_23_30, AGE_31_54, AGE_55_PLUS} (optional, default to &quot;&quot;)</param>
    /// <param name="country">The country to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="state">The state to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="city">The city to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="zip">The zip to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="model">The model to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="tag">The tag to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="userAccountId">The account id to filter results for a particular user (optional, default to 0L)</param>
    /// <param name="userAccountDisplay">The user display to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="userAccountUsername">The username to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="groupByRoot">Determines how to group results. For example, passing in &#39;CREATED&#39; will return results by date. Passing in &#39;ACCOUNT&#39; will return results by user {TAG, CUSTOM_ID, TOKEN, MODEL, DEVICE_TYPE, DEVICE, DEVICE_OS, IP_ADDRESS, STATE, CITY, ZIP, COUNTRY, ACCOUNT, APPLICATION_ID, APPLICATION_NAME_BY_ID} (optional, default to &quot;&quot;)</param>
    /// <param name="groupBy">Determines how to group the nested data. {TAG, CUSTOM_ID, TOKEN, MODEL, DEVICE_TYPE, DEVICE, DEVICE_OS, IP_ADDRESS, STATE, CITY, ZIP, COUNTRY, ACCOUNT, APPLICATION_ID, APPLICATION_NAME_BY_ID} (optional, default to &quot;&quot;)</param>
    /// <param name="distinctCount">Performs a unique query on the specified column. For example, passing in &#39;ACCOUNT&#39; will return the number of unique users. {TAG, CUSTOM_ID, TOKEN, MODEL, DEVICE_TYPE, DEVICE, DEVICE_OS, IP_ADDRESS, STATE, CITY, ZIP, COUNTRY, ACCOUNT, APPLICATION_ID, NEW_ACCOUNT} (optional, default to &quot;&quot;)</param>
    /// <param name="sortField">Determines whether the results will be sorted by day or by number of hits {CREATED, TAG_COUNT} (optional, default to &quot;&quot;)</param>
    /// <param name="descending">Determines whether to return results in descending order (optional, default to false)</param>
    /// <param name="hideUnknown">Determines whether to return data that has empty or unknown values (optional, default to false)</param>
    /// <param name="responseFormat">Determines whether to return a JOSN or XML representation of the graph results (optional, default to &quot;&quot;)</param>
    /// <param name="l">This parameter is deprecated. (optional, default to 0)</param>
    /// <param name="limit">Used to limit results to get a cleaner graph. The results that gets filtered out will be combined (optional, default to 0)</param>
    /// <param name="latitude">the current latitude of the user (optional, default to 0.0)</param>
    /// <param name="longitude">the current longitude of the user (optional, default to 0.0)</param>
    virtual void aggregated_filtered_usage( const double &version, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int64_t> &applicationId, const std::optional<std::string> &appKey, const std::optional<int64_t> &startDate, const std::optional<int64_t> &endDate, const std::optional<std::string> &deviceType, const std::optional<std::string> &device, const std::optional<std::string> &deviceOS, const std::optional<std::string> &gender, const std::optional<std::string> &ageGroup, const std::optional<std::string> &country, const std::optional<std::string> &state, const std::optional<std::string> &city, const std::optional<std::string> &zip, const std::optional<std::string> &model, const std::optional<std::string> &tag, const std::optional<int64_t> &userAccountId, const std::optional<std::string> &userAccountDisplay, const std::optional<std::string> &userAccountUsername, const std::optional<std::string> &groupByRoot, const std::optional<std::string> &groupBy, const std::optional<std::string> &distinctCount, const std::optional<std::string> &sortField, const std::optional<bool> &descending, const std::optional<bool> &hideUnknown, const std::optional<std::string> &responseFormat, const std::optional<int32_t> &l, const std::optional<int32_t> &limit, const std::optional<double> &latitude, const std::optional<double> &longitude, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Get Filtered Usage
    /// </summary>
    /// <remarks>
    /// Query analytics to get data used for graphs and charts
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="deviceId">The unique id of the device making the request (deviceId or accountId required) (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The account id of the user (deviceId or accountId required) (optional, default to 0L)</param>
    /// <param name="applicationId">This parameter is deprecated. (optional, default to 0L)</param>
    /// <param name="appKey">The application key used to filter results by application (optional, default to &quot;&quot;)</param>
    /// <param name="startDate">Used to search for results after or equal to this date (UNIX time-stamp in milliseconds) (optional, default to 0L)</param>
    /// <param name="endDate">Used to search for results before or equal to this date (UNIX time-stamp in milliseconds) (optional, default to 0L)</param>
    /// <param name="deviceType">The device type to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="device">The device to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="deviceOS">The device OS to filter results by (performs a LIKE search) (optional, default to &quot;&quot;)</param>
    /// <param name="gender">The gender to filter results by {MALE, FEMALE} (optional, default to &quot;&quot;)</param>
    /// <param name="ageGroup">Comma separated list of age groups to filter by {AGE_0_13, AGE_14_17, AGE_18_22, AGE_23_30, AGE_31_54, AGE_55_PLUS} (optional, default to &quot;&quot;)</param>
    /// <param name="country">The country to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="state">The state to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="city">The city to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="zip">The zip to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="model">The model to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="tag">The tag to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="userAccountId">The account id to filter results for a particular user (optional, default to 0L)</param>
    /// <param name="userAccountDisplay">The user display to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="userAccountUsername">The username to filter results by (performs a wild-card search) (optional, default to &quot;&quot;)</param>
    /// <param name="customId">The ID for the custom table column (optional, default to 0L)</param>
    /// <param name="customType">The type defined for the custom table column (optional, default to &quot;&quot;)</param>
    /// <param name="customValue">The value for the custom table column (optional, default to 0.0)</param>
    /// <param name="customValue2">The value for another custom table column (optional, default to 0.0)</param>
    /// <param name="customLong">The value that supports Longs for custom table column (optional, default to 0L)</param>
    /// <param name="customLong2">The value that supports Longs for custom table column (optional, default to 0L)</param>
    /// <param name="customMessage">The message for the custom table column (optional, default to &quot;&quot;)</param>
    /// <param name="customMessage2">The message for the custom table column (optional, default to &quot;&quot;)</param>
    /// <param name="groupBy">Determines how to group results. For example, passing in &#39;CREATED&#39; will return results by date. Passing in &#39;ACCOUNT&#39; will return results by user {TAG, CUSTOM_ID, TOKEN, MODEL, DEVICE_TYPE, DEVICE, DEVICE_OS, DEVICE_ID, IP_ADDRESS, STATE, CITY, ZIP, COUNTRY, ACCOUNT, APPLICATION_ID} (optional, default to &quot;&quot;)</param>
    /// <param name="distinctCount">Performs a unique query on the specified column. For example, passing in &#39;ACCOUNT&#39; will return the number of unique users. {TAG, CUSTOM_ID, TOKEN, MODEL, DEVICE_TYPE, DEVICE, DEVICE_OS, DEVICE_ID, IP_ADDRESS, STATE, CITY, ZIP, COUNTRY, ACCOUNT, APPLICATION_ID} (optional, default to &quot;&quot;)</param>
    /// <param name="sumColumn">sum of the column values (optional, default to &quot;&quot;)</param>
    /// <param name="sortField">Determines whether the results will be sorted by day or by number of hits {CREATED, TAG_COUNT} (optional, default to &quot;&quot;)</param>
    /// <param name="descending">Determines whether to return results in descending order (optional, default to false)</param>
    /// <param name="hideUnknown">Determines whether to return data that has empty or unknown values (optional, default to false)</param>
    /// <param name="responseFormat">Determines whether to return a JOSN or XML representation of the graph results (optional, default to &quot;&quot;)</param>
    /// <param name="l">This parameter is deprecated. (optional, default to 0)</param>
    /// <param name="limit">Used to limit results to get a cleaner graph. The results that gets filtered out will be combined (optional, default to 0)</param>
    /// <param name="latitude">the current latitude of the user (optional, default to 0.0)</param>
    /// <param name="longitude">the current longitude of the user (optional, default to 0.0)</param>
    virtual void filtered_usage( const double &version, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int64_t> &applicationId, const std::optional<std::string> &appKey, const std::optional<int64_t> &startDate, const std::optional<int64_t> &endDate, const std::optional<std::string> &deviceType, const std::optional<std::string> &device, const std::optional<std::string> &deviceOS, const std::optional<std::string> &gender, const std::optional<std::string> &ageGroup, const std::optional<std::string> &country, const std::optional<std::string> &state, const std::optional<std::string> &city, const std::optional<std::string> &zip, const std::optional<std::string> &model, const std::optional<std::string> &tag, const std::optional<int64_t> &userAccountId, const std::optional<std::string> &userAccountDisplay, const std::optional<std::string> &userAccountUsername, const std::optional<int64_t> &customId, const std::optional<std::string> &customType, const std::optional<double> &customValue, const std::optional<double> &customValue2, const std::optional<int64_t> &customLong, const std::optional<int64_t> &customLong2, const std::optional<std::string> &customMessage, const std::optional<std::string> &customMessage2, const std::optional<std::string> &groupBy, const std::optional<std::string> &distinctCount, const std::optional<std::string> &sumColumn, const std::optional<std::string> &sortField, const std::optional<bool> &descending, const std::optional<bool> &hideUnknown, const std::optional<std::string> &responseFormat, const std::optional<int32_t> &l, const std::optional<int32_t> &limit, const std::optional<double> &latitude, const std::optional<double> &longitude, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Create Usage Record
    /// </summary>
    /// <remarks>
    /// Record an analytic record for a known state within the application.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="tag">The tag to apply: the name of the action or thing being logged.</param>
    /// <param name="deviceId">The client deviceID (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The logged in user ID (optional, default to 0L)</param>
    /// <param name="applicationId">This parameter is deprecated. This is deprecated, use appKey. (optional, default to 0L)</param>
    /// <param name="appKey">The application key unique to each application. (optional, default to &quot;&quot;)</param>
    /// <param name="appVersion">The current build version of the application (optional, default to &quot;&quot;)</param>
    /// <param name="device">The name of the device being used (iPhone5,1 , HTC Nexus One, x86_64, etc.) (optional, default to &quot;&quot;)</param>
    /// <param name="deviceType">The type of device (Handheld or Desktop) (optional, default to &quot;&quot;)</param>
    /// <param name="deviceOS">The operating system that the device is using (iPhone OS 5.0, Android OS 2.3.6, Windows 7 Service Pack 1, etc) (optional, default to &quot;&quot;)</param>
    /// <param name="model">The model of the device (iPhone5,1 , Nexus One, etc.) (optional, default to &quot;&quot;)</param>
    /// <param name="latitude">The current position of the user (optional, default to 0.0)</param>
    /// <param name="longitude">The current position of the user (optional, default to 0.0)</param>
    /// <param name="customId">A customId used to associate the usage record with some other record in the system (optional, default to 0L)</param>
    /// <param name="customType">The type of record the customId is recorded for (optional, default to &quot;&quot;)</param>
    /// <param name="achievementIncrement">This parameter is deprecated. This is deprecated, use \&quot;customValue\&quot;. Determines how many achievement points and/or ranking points the user gets if this analytic is associated with an achievement (optional, default to 0L)</param>
    /// <param name="city">The current city of the user (optional, default to &quot;&quot;)</param>
    /// <param name="state">The current state of the user (optional, default to &quot;&quot;)</param>
    /// <param name="country">The current country of the user (optional, default to &quot;&quot;)</param>
    /// <param name="zip">The current zip of the user (optional, default to &quot;&quot;)</param>
    /// <param name="locationDescription">The general description of the user&#39;s location (optional, default to &quot;&quot;)</param>
    /// <param name="clientTime">Timestamp sent from device (optional, default to 0L)</param>
    /// <param name="errorMessage">This parameter is deprecated. (optional, default to &quot;&quot;)</param>
    /// <param name="ip">the ip address of the client device (optional, default to &quot;&quot;)</param>
    /// <param name="userAgent">this is a description of the client (might contain the device&#39;s OS, browser version etc - its a common term) (optional, default to &quot;&quot;)</param>
    /// <param name="backgroundEvent">This is deprecated. (optional, default to false)</param>
    /// <param name="customMessage">a custom message for the usage record (optional, default to &quot;&quot;)</param>
    /// <param name="customMessage2">a custom message for the usage record (optional, default to &quot;&quot;)</param>
    /// <param name="customValue">a custom value for the usage record (optional, default to 0.0)</param>
    /// <param name="customValue2">a custom value for the usage record (optional, default to 0.0)</param>
    /// <param name="customLong">a custom long value for the usage record (optional, default to 0L)</param>
    /// <param name="customLong2">a custom long value for the usage record (optional, default to 0L)</param>
    virtual void usage( const double &version, const std::optional<std::string> &tag, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<int64_t> &applicationId, const std::optional<std::string> &appKey, const std::optional<std::string> &appVersion, const std::optional<std::string> &device, const std::optional<std::string> &deviceType, const std::optional<std::string> &deviceOS, const std::optional<std::string> &model, const std::optional<double> &latitude, const std::optional<double> &longitude, const std::optional<int64_t> &customId, const std::optional<std::string> &customType, const std::optional<int64_t> &achievementIncrement, const std::optional<std::string> &city, const std::optional<std::string> &state, const std::optional<std::string> &country, const std::optional<std::string> &zip, const std::optional<std::string> &locationDescription, const std::optional<int64_t> &clientTime, const std::optional<std::string> &errorMessage, const std::optional<std::string> &ip, const std::optional<std::string> &userAgent, const std::optional<bool> &backgroundEvent, const std::optional<std::string> &customMessage, const std::optional<std::string> &customMessage2, const std::optional<double> &customValue, const std::optional<double> &customValue2, const std::optional<int64_t> &customLong, const std::optional<int64_t> &customLong2, Pistache::Http::ResponseWriter &response) = 0;
    /// <summary>
    /// Create Multiple Usage Records
    /// </summary>
    /// <remarks>
    /// Sends multiple analytics. Can be used to send in the user&#39;s stored usage when they did not have internet access. Should not include more than 100 items per batch.
    /// </remarks>
    /// <param name="version"></param>
    /// <param name="appKey">The application key unique to each application.</param>
    /// <param name="device">The name of the device being used (iPhone5,1 , HTC Nexus One, x86_64, etc.)</param>
    /// <param name="data">The analytic data AnalyticListResponse</param>
    /// <param name="deviceId">The unique id of the device making the request (optional, default to &quot;&quot;)</param>
    /// <param name="accountId">The account ID of the logged in user making the request (optional, default to 0L)</param>
    /// <param name="appVersion">The current build version of the application (optional, default to &quot;&quot;)</param>
    /// <param name="deviceType">The type of device (Handheld or Desktop) (optional, default to &quot;&quot;)</param>
    /// <param name="deviceOS">The operating system that the device is using (iPhone OS 5.0, Android OS 2.3.6, Windows 7 Service Pack 1, etc.) (optional, default to &quot;&quot;)</param>
    /// <param name="model">The model of the device (iPhone5,1 , Nexus One, etc.) (optional, default to &quot;&quot;)</param>
    /// <param name="updateRanking">Will create a leaderboard if one does not exist for the \&quot;tag\&quot; yet (optional, default to false)</param>
    /// <param name="returnSummaryResponse">Returns a summary response of the achievements that have been completed due to the analytics (optional, default to false)</param>
    virtual void usage_batch( const double &version, const std::optional<std::string> &appKey, const std::optional<std::string> &device, const std::optional<std::string> &data, const std::optional<std::string> &deviceId, const std::optional<int64_t> &accountId, const std::optional<std::string> &appVersion, const std::optional<std::string> &deviceType, const std::optional<std::string> &deviceOS, const std::optional<std::string> &model, const std::optional<bool> &updateRanking, const std::optional<bool> &returnSummaryResponse, Pistache::Http::ResponseWriter &response) = 0;

};

} // namespace org::openapitools::server::api

#endif /* AnalyticsApi_H_ */

