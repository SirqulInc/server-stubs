/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 */


package org.openapitools.server.api

import org.openapitools.server.model.AccountMiniResponse
import org.openapitools.server.model.Leg
import org.openapitools.server.model.LegResponse
import org.openapitools.server.model.PredictedLocationResponse
import org.openapitools.server.model.PreferredLocationResponse
import org.openapitools.server.model.SirqulResponse
import org.openapitools.server.model.StepResponse

import java.io.File

import org.scalatra.ScalatraServlet
import org.scalatra.swagger._
import org.json4s._
import org.json4s.JsonDSL._
import org.scalatra.json.{ JValueResult, JacksonJsonSupport }
import org.scalatra.servlet.{ FileUploadSupport, MultipartConfig, SizeConstraintExceededException }

import scala.collection.JavaConverters._

class TrackingApi(implicit val swagger: Swagger) extends ScalatraServlet
  with FileUploadSupport
  with JacksonJsonSupport
  with SwaggerSupport {
  protected implicit val jsonFormats: Formats = DefaultFormats

  protected val applicationDescription: String = "TrackingApi"

  before() {
    contentType = formats("json")
    response.headers += ("Access-Control-Allow-Origin" -> "*")
  }
  

  val batchSaveTrackingOperation = (apiOperation[List[Leg]]("batchSaveTracking")
    summary "Create Batch Tracking"
    parameters(queryParam[String]("data").description(""), queryParam[String]("deviceId").description("").optional, queryParam[Long]("accountId").description("").optional, queryParam[Boolean]("generateAccounts").description("").optional, queryParam[Boolean]("updateAccountLocations").description("").optional, queryParam[String]("defaultTag").description("").optional.defaultValue(PASSIVE), queryParam[String]("slaveUID").description("").optional)
  )

  post("/tracking/batch/create", operation(batchSaveTrackingOperation)) {
            val data = params.getAs[String]("data")

    //println("data: " + data)
            val deviceId = params.getAs[String]("deviceId")

    //println("deviceId: " + deviceId)
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val generateAccounts = params.getAs[Boolean]("generateAccounts")

    //println("generateAccounts: " + generateAccounts)
            val updateAccountLocations = params.getAs[Boolean]("updateAccountLocations")

    //println("updateAccountLocations: " + updateAccountLocations)
            val defaultTag = params.getAs[String]("defaultTag")

    //println("defaultTag: " + defaultTag)
            val slaveUID = params.getAs[String]("slaveUID")

    //println("slaveUID: " + slaveUID)
  }

  

  val getPredictedLocationsOperation = (apiOperation[PredictedLocationResponse]("getPredictedLocations")
    summary "Get Predicted Locations"
    parameters(queryParam[Long]("accountId").description(""), queryParam[Double]("latitude").description("").optional, queryParam[Double]("longitude").description("").optional, queryParam[Long]("dateCheck").description("").optional, queryParam[String]("hourCheck").description("").optional, queryParam[Long]("threshold").description("").optional.defaultValue(1), queryParam[String]("distanceUnit").description("").optional.defaultValue(MILES), queryParam[Double]("searchRange").description("").optional.defaultValue(0), queryParam[String]("sortOrder").description("").optional.defaultValue(MATCHES))
  )

  get("/tracking/predicted/get", operation(getPredictedLocationsOperation)) {
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val latitude = params.getAs[Double]("latitude")

    //println("latitude: " + latitude)
            val longitude = params.getAs[Double]("longitude")

    //println("longitude: " + longitude)
            val dateCheck = params.getAs[Long]("dateCheck")

    //println("dateCheck: " + dateCheck)
            val hourCheck = params.getAs[String]("hourCheck")

    //println("hourCheck: " + hourCheck)
            val threshold = params.getAs[Long]("threshold")

    //println("threshold: " + threshold)
            val distanceUnit = params.getAs[String]("distanceUnit")

    //println("distanceUnit: " + distanceUnit)
            val searchRange = params.getAs[Double]("searchRange")

    //println("searchRange: " + searchRange)
            val sortOrder = params.getAs[String]("sortOrder")

    //println("sortOrder: " + sortOrder)
  }

  

  val getPredictedPathOperation = (apiOperation[List[StepResponse]]("getPredictedPath")
    summary "Get Tracking Path"
    parameters(queryParam[Long]("accountId").description(""), queryParam[Long]("startStepId").description(""), queryParam[Long]("endStepId").description(""))
  )

  get("/tracking/path/get", operation(getPredictedPathOperation)) {
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val startStepId = params.getAs[Long]("startStepId")

    //println("startStepId: " + startStepId)
            val endStepId = params.getAs[Long]("endStepId")

    //println("endStepId: " + endStepId)
  }

  

  val getPreferredLocationsOperation = (apiOperation[List[PreferredLocationResponse]]("getPreferredLocations")
    summary "Search Preferred Locations"
    parameters(queryParam[Long]("accountId").description(""), queryParam[Double]("latitude").description("").optional, queryParam[Double]("longitude").description("").optional, queryParam[Long]("dateCheck").description("").optional, queryParam[String]("hourCheck").description("").optional, queryParam[String]("sortField").description("").optional.defaultValue(PREFERRED_DATE), queryParam[Boolean]("descending").description("").optional.defaultValue(true), queryParam[Int]("start").description("").optional.defaultValue(0), queryParam[Int]("limit").description("").optional.defaultValue(20), queryParam[Double]("searchRange").description("").optional.defaultValue(0), queryParam[String]("distanceUnit").description("").optional.defaultValue(MILES))
  )

  get("/tracking/preferred/search", operation(getPreferredLocationsOperation)) {
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val latitude = params.getAs[Double]("latitude")

    //println("latitude: " + latitude)
            val longitude = params.getAs[Double]("longitude")

    //println("longitude: " + longitude)
            val dateCheck = params.getAs[Long]("dateCheck")

    //println("dateCheck: " + dateCheck)
            val hourCheck = params.getAs[String]("hourCheck")

    //println("hourCheck: " + hourCheck)
            val sortField = params.getAs[String]("sortField")

    //println("sortField: " + sortField)
            val descending = params.getAs[Boolean]("descending")

    //println("descending: " + descending)
            val start = params.getAs[Int]("start")

    //println("start: " + start)
            val limit = params.getAs[Int]("limit")

    //println("limit: " + limit)
            val searchRange = params.getAs[Double]("searchRange")

    //println("searchRange: " + searchRange)
            val distanceUnit = params.getAs[String]("distanceUnit")

    //println("distanceUnit: " + distanceUnit)
  }

  

  val getTrackingLegsOperation = (apiOperation[List[LegResponse]]("getTrackingLegs")
    summary "Search Tracking"
    parameters(queryParam[String]("deviceId").description("").optional, queryParam[Long]("accountId").description("").optional, queryParam[Long]("ownerId").description("").optional, queryParam[String]("trackingDeviceId").description("").optional, queryParam[Long]("startDate").description("").optional, queryParam[Long]("endDate").description("").optional, queryParam[String]("tags").description("").optional, queryParam[Boolean]("getLastPoint").description("").optional.defaultValue(false))
  )

  get("/tracking/search", operation(getTrackingLegsOperation)) {
            val deviceId = params.getAs[String]("deviceId")

    //println("deviceId: " + deviceId)
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val ownerId = params.getAs[Long]("ownerId")

    //println("ownerId: " + ownerId)
            val trackingDeviceId = params.getAs[String]("trackingDeviceId")

    //println("trackingDeviceId: " + trackingDeviceId)
            val startDate = params.getAs[Long]("startDate")

    //println("startDate: " + startDate)
            val endDate = params.getAs[Long]("endDate")

    //println("endDate: " + endDate)
            val tags = params.getAs[String]("tags")

    //println("tags: " + tags)
            val getLastPoint = params.getAs[Boolean]("getLastPoint")

    //println("getLastPoint: " + getLastPoint)
  }

  

  val saveTrackingLegOperation = (apiOperation[SirqulResponse]("saveTrackingLeg")
    summary "Create Tracking Leg"
    parameters(queryParam[Double]("startLat").description(""), queryParam[Double]("startLng").description(""), queryParam[Long]("startDate").description(""), queryParam[Double]("endLat").description(""), queryParam[Double]("endLng").description(""), queryParam[Long]("endDate").description(""), queryParam[String]("deviceId").description("").optional, queryParam[Long]("accountId").description("").optional, queryParam[Double]("distance").description("").optional, queryParam[Long]("duration").description("").optional, queryParam[String]("steps").description("").optional, queryParam[String]("tags").description("").optional)
  )

  post("/tracking/leg/create", operation(saveTrackingLegOperation)) {
            val startLat = params.getAs[Double]("startLat")

    //println("startLat: " + startLat)
            val startLng = params.getAs[Double]("startLng")

    //println("startLng: " + startLng)
            val startDate = params.getAs[Long]("startDate")

    //println("startDate: " + startDate)
            val endLat = params.getAs[Double]("endLat")

    //println("endLat: " + endLat)
            val endLng = params.getAs[Double]("endLng")

    //println("endLng: " + endLng)
            val endDate = params.getAs[Long]("endDate")

    //println("endDate: " + endDate)
            val deviceId = params.getAs[String]("deviceId")

    //println("deviceId: " + deviceId)
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val distance = params.getAs[Double]("distance")

    //println("distance: " + distance)
            val duration = params.getAs[Long]("duration")

    //println("duration: " + duration)
            val steps = params.getAs[String]("steps")

    //println("steps: " + steps)
            val tags = params.getAs[String]("tags")

    //println("tags: " + tags)
  }

  

  val saveTrackingStepOperation = (apiOperation[SirqulResponse]("saveTrackingStep")
    summary "Create Tracking Step"
    parameters(queryParam[Long]("legId").description(""), queryParam[Double]("startLat").description(""), queryParam[Double]("startLng").description(""), queryParam[Long]("startDate").description(""), queryParam[Double]("endLat").description(""), queryParam[Double]("endLng").description(""), queryParam[Long]("endDate").description(""), queryParam[String]("deviceId").description("").optional, queryParam[Long]("accountId").description("").optional, queryParam[Double]("distance").description("").optional, queryParam[Long]("duration").description("").optional)
  )

  post("/tracking/step/create", operation(saveTrackingStepOperation)) {
            val legId = params.getAs[Long]("legId")

    //println("legId: " + legId)
            val startLat = params.getAs[Double]("startLat")

    //println("startLat: " + startLat)
            val startLng = params.getAs[Double]("startLng")

    //println("startLng: " + startLng)
            val startDate = params.getAs[Long]("startDate")

    //println("startDate: " + startDate)
            val endLat = params.getAs[Double]("endLat")

    //println("endLat: " + endLat)
            val endLng = params.getAs[Double]("endLng")

    //println("endLng: " + endLng)
            val endDate = params.getAs[Long]("endDate")

    //println("endDate: " + endDate)
            val deviceId = params.getAs[String]("deviceId")

    //println("deviceId: " + deviceId)
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val distance = params.getAs[Double]("distance")

    //println("distance: " + distance)
            val duration = params.getAs[Long]("duration")

    //println("duration: " + duration)
  }

  

  val searchAccountsWithTrackingLegsOperation = (apiOperation[List[AccountMiniResponse]]("searchAccountsWithTrackingLegs")
    summary "List Tracking"
    parameters(queryParam[Long]("accountId").description(""), queryParam[String]("keyword").description("").optional, queryParam[Long]("startDate").description("").optional, queryParam[Long]("endDate").description("").optional, queryParam[String]("tags").description("").optional, queryParam[String]("audienceIds").description("").optional, queryParam[Double]("latitude").description("").optional, queryParam[Double]("longitude").description("").optional, queryParam[Double]("range").description("").optional.defaultValue(5), queryParam[String]("sortField").description("").optional.defaultValue(LEG_START_DATE), queryParam[Boolean]("descending").description("").optional.defaultValue(true), queryParam[Int]("start").description("").optional.defaultValue(0), queryParam[Int]("limit").description("").optional.defaultValue(20), queryParam[Boolean]("activeOnly").description("").optional.defaultValue(false))
  )

  get("/tracking/list", operation(searchAccountsWithTrackingLegsOperation)) {
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val keyword = params.getAs[String]("keyword")

    //println("keyword: " + keyword)
            val startDate = params.getAs[Long]("startDate")

    //println("startDate: " + startDate)
            val endDate = params.getAs[Long]("endDate")

    //println("endDate: " + endDate)
            val tags = params.getAs[String]("tags")

    //println("tags: " + tags)
            val audienceIds = params.getAs[String]("audienceIds")

    //println("audienceIds: " + audienceIds)
            val latitude = params.getAs[Double]("latitude")

    //println("latitude: " + latitude)
            val longitude = params.getAs[Double]("longitude")

    //println("longitude: " + longitude)
            val range = params.getAs[Double]("range")

    //println("range: " + range)
            val sortField = params.getAs[String]("sortField")

    //println("sortField: " + sortField)
            val descending = params.getAs[Boolean]("descending")

    //println("descending: " + descending)
            val start = params.getAs[Int]("start")

    //println("start: " + start)
            val limit = params.getAs[Int]("limit")

    //println("limit: " + limit)
            val activeOnly = params.getAs[Boolean]("activeOnly")

    //println("activeOnly: " + activeOnly)
  }

  

  val searchTrackingLegsOperation = (apiOperation[List[LegResponse]]("searchTrackingLegs")
    summary "Search Tracking (Billable)"
    parameters(queryParam[Long]("accountId").description(""), queryParam[String]("appKey").description(""), queryParam[String]("trackingDeviceId").description("").optional, queryParam[Long]("startDate").description("").optional, queryParam[Long]("endDate").description("").optional, queryParam[String]("tags").description("").optional, queryParam[Int]("start").description("").optional.defaultValue(0), queryParam[Int]("limit").description("").optional.defaultValue(100))
  )

  get("/tracking/searchByBillable", operation(searchTrackingLegsOperation)) {
            val accountId = params.getAs[Long]("accountId")

    //println("accountId: " + accountId)
            val appKey = params.getAs[String]("appKey")

    //println("appKey: " + appKey)
            val trackingDeviceId = params.getAs[String]("trackingDeviceId")

    //println("trackingDeviceId: " + trackingDeviceId)
            val startDate = params.getAs[Long]("startDate")

    //println("startDate: " + startDate)
            val endDate = params.getAs[Long]("endDate")

    //println("endDate: " + endDate)
            val tags = params.getAs[String]("tags")

    //println("tags: " + tags)
            val start = params.getAs[Int]("start")

    //println("start: " + start)
            val limit = params.getAs[Int]("limit")

    //println("limit: " + limit)
  }

}
