// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

/*
 * Sirqul IoT Platform
 *
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * API version: 3.16
 * Contact: info@sirqul.com
 */

package openapi

import (
	"net/http"
	"strings"
)

// AnalyticsAPIController binds http requests to an api service and writes the service results to the http response
type AnalyticsAPIController struct {
	service AnalyticsAPIServicer
	errorHandler ErrorHandler
}

// AnalyticsAPIOption for how the controller is set up.
type AnalyticsAPIOption func(*AnalyticsAPIController)

// WithAnalyticsAPIErrorHandler inject ErrorHandler into controller
func WithAnalyticsAPIErrorHandler(h ErrorHandler) AnalyticsAPIOption {
	return func(c *AnalyticsAPIController) {
		c.errorHandler = h
	}
}

// NewAnalyticsAPIController creates a default api controller
func NewAnalyticsAPIController(s AnalyticsAPIServicer, opts ...AnalyticsAPIOption) *AnalyticsAPIController {
	controller := &AnalyticsAPIController{
		service:      s,
		errorHandler: DefaultErrorHandler,
	}

	for _, opt := range opts {
		opt(controller)
	}

	return controller
}

// Routes returns all the api routes for the AnalyticsAPIController
func (c *AnalyticsAPIController) Routes() Routes {
	return Routes{
		"AggregatedFilteredUsage": Route{
			"AggregatedFilteredUsage",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/aggregatedFilteredUsage",
			c.AggregatedFilteredUsage,
		},
		"FilteredUsage": Route{
			"FilteredUsage",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/filteredUsage",
			c.FilteredUsage,
		},
		"Usage": Route{
			"Usage",
			strings.ToUpper("Post"),
			"/api/3.18/analytics/usage",
			c.Usage,
		},
		"UsageBatch": Route{
			"UsageBatch",
			strings.ToUpper("Post"),
			"/api/3.18/analytics/usage/batch",
			c.UsageBatch,
		},
		"Activities": Route{
			"Activities",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/useractivity",
			c.Activities,
		},
	}
}

// OrderedRoutes returns all the api routes in a deterministic order for the AnalyticsAPIController
func (c *AnalyticsAPIController) OrderedRoutes() []Route {
	return []Route{
		Route{
			"AggregatedFilteredUsage",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/aggregatedFilteredUsage",
			c.AggregatedFilteredUsage,
		},
		Route{
			"FilteredUsage",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/filteredUsage",
			c.FilteredUsage,
		},
		Route{
			"Usage",
			strings.ToUpper("Post"),
			"/api/3.18/analytics/usage",
			c.Usage,
		},
		Route{
			"UsageBatch",
			strings.ToUpper("Post"),
			"/api/3.18/analytics/usage/batch",
			c.UsageBatch,
		},
		Route{
			"Activities",
			strings.ToUpper("Get"),
			"/api/3.18/analytics/useractivity",
			c.Activities,
		},
	}
}



// AggregatedFilteredUsage - Get Aggregated Filtered Usage
func (c *AnalyticsAPIController) AggregatedFilteredUsage(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var applicationIdParam int64
	if query.Has("applicationId") {
		param, err := parseNumericParameter[int64](
			query.Get("applicationId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "applicationId", Err: err}, nil)
			return
		}

		applicationIdParam = param
	} else {
	}
	var appKeyParam string
	if query.Has("appKey") {
		param := query.Get("appKey")

		appKeyParam = param
	} else {
	}
	var startDateParam int64
	if query.Has("startDate") {
		param, err := parseNumericParameter[int64](
			query.Get("startDate"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "startDate", Err: err}, nil)
			return
		}

		startDateParam = param
	} else {
	}
	var endDateParam int64
	if query.Has("endDate") {
		param, err := parseNumericParameter[int64](
			query.Get("endDate"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "endDate", Err: err}, nil)
			return
		}

		endDateParam = param
	} else {
	}
	var deviceTypeParam string
	if query.Has("deviceType") {
		param := query.Get("deviceType")

		deviceTypeParam = param
	} else {
	}
	var deviceParam string
	if query.Has("device") {
		param := query.Get("device")

		deviceParam = param
	} else {
	}
	var deviceOSParam string
	if query.Has("deviceOS") {
		param := query.Get("deviceOS")

		deviceOSParam = param
	} else {
	}
	var genderParam string
	if query.Has("gender") {
		param := query.Get("gender")

		genderParam = param
	} else {
	}
	var ageGroupParam string
	if query.Has("ageGroup") {
		param := query.Get("ageGroup")

		ageGroupParam = param
	} else {
	}
	var countryParam string
	if query.Has("country") {
		param := query.Get("country")

		countryParam = param
	} else {
	}
	var stateParam string
	if query.Has("state") {
		param := query.Get("state")

		stateParam = param
	} else {
	}
	var cityParam string
	if query.Has("city") {
		param := query.Get("city")

		cityParam = param
	} else {
	}
	var zipParam string
	if query.Has("zip") {
		param := query.Get("zip")

		zipParam = param
	} else {
	}
	var modelParam string
	if query.Has("model") {
		param := query.Get("model")

		modelParam = param
	} else {
	}
	var tagParam string
	if query.Has("tag") {
		param := query.Get("tag")

		tagParam = param
	} else {
	}
	var userAccountIdParam int64
	if query.Has("userAccountId") {
		param, err := parseNumericParameter[int64](
			query.Get("userAccountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "userAccountId", Err: err}, nil)
			return
		}

		userAccountIdParam = param
	} else {
	}
	var userAccountDisplayParam string
	if query.Has("userAccountDisplay") {
		param := query.Get("userAccountDisplay")

		userAccountDisplayParam = param
	} else {
	}
	var userAccountUsernameParam string
	if query.Has("userAccountUsername") {
		param := query.Get("userAccountUsername")

		userAccountUsernameParam = param
	} else {
	}
	var groupByRootParam string
	if query.Has("groupByRoot") {
		param := query.Get("groupByRoot")

		groupByRootParam = param
	} else {
	}
	var groupByParam string
	if query.Has("groupBy") {
		param := query.Get("groupBy")

		groupByParam = param
	} else {
	}
	var distinctCountParam string
	if query.Has("distinctCount") {
		param := query.Get("distinctCount")

		distinctCountParam = param
	} else {
	}
	var sortFieldParam string
	if query.Has("sortField") {
		param := query.Get("sortField")

		sortFieldParam = param
	} else {
	}
	var descendingParam bool
	if query.Has("descending") {
		param, err := parseBoolParameter(
			query.Get("descending"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "descending", Err: err}, nil)
			return
		}

		descendingParam = param
	} else {
	}
	var hideUnknownParam bool
	if query.Has("hideUnknown") {
		param, err := parseBoolParameter(
			query.Get("hideUnknown"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "hideUnknown", Err: err}, nil)
			return
		}

		hideUnknownParam = param
	} else {
	}
	var responseFormatParam string
	if query.Has("responseFormat") {
		param := query.Get("responseFormat")

		responseFormatParam = param
	} else {
	}
	var lParam int32
	if query.Has("_l") {
		param, err := parseNumericParameter[int32](
			query.Get("_l"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "_l", Err: err}, nil)
			return
		}

		lParam = param
	} else {
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.AggregatedFilteredUsage(r.Context(), deviceIdParam, accountIdParam, applicationIdParam, appKeyParam, startDateParam, endDateParam, deviceTypeParam, deviceParam, deviceOSParam, genderParam, ageGroupParam, countryParam, stateParam, cityParam, zipParam, modelParam, tagParam, userAccountIdParam, userAccountDisplayParam, userAccountUsernameParam, groupByRootParam, groupByParam, distinctCountParam, sortFieldParam, descendingParam, hideUnknownParam, responseFormatParam, lParam, limitParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// FilteredUsage - Get Filtered Usage
func (c *AnalyticsAPIController) FilteredUsage(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var applicationIdParam int64
	if query.Has("applicationId") {
		param, err := parseNumericParameter[int64](
			query.Get("applicationId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "applicationId", Err: err}, nil)
			return
		}

		applicationIdParam = param
	} else {
	}
	var appKeyParam string
	if query.Has("appKey") {
		param := query.Get("appKey")

		appKeyParam = param
	} else {
	}
	var startDateParam int64
	if query.Has("startDate") {
		param, err := parseNumericParameter[int64](
			query.Get("startDate"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "startDate", Err: err}, nil)
			return
		}

		startDateParam = param
	} else {
	}
	var endDateParam int64
	if query.Has("endDate") {
		param, err := parseNumericParameter[int64](
			query.Get("endDate"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "endDate", Err: err}, nil)
			return
		}

		endDateParam = param
	} else {
	}
	var deviceTypeParam string
	if query.Has("deviceType") {
		param := query.Get("deviceType")

		deviceTypeParam = param
	} else {
	}
	var deviceParam string
	if query.Has("device") {
		param := query.Get("device")

		deviceParam = param
	} else {
	}
	var deviceOSParam string
	if query.Has("deviceOS") {
		param := query.Get("deviceOS")

		deviceOSParam = param
	} else {
	}
	var genderParam string
	if query.Has("gender") {
		param := query.Get("gender")

		genderParam = param
	} else {
	}
	var ageGroupParam string
	if query.Has("ageGroup") {
		param := query.Get("ageGroup")

		ageGroupParam = param
	} else {
	}
	var countryParam string
	if query.Has("country") {
		param := query.Get("country")

		countryParam = param
	} else {
	}
	var stateParam string
	if query.Has("state") {
		param := query.Get("state")

		stateParam = param
	} else {
	}
	var cityParam string
	if query.Has("city") {
		param := query.Get("city")

		cityParam = param
	} else {
	}
	var zipParam string
	if query.Has("zip") {
		param := query.Get("zip")

		zipParam = param
	} else {
	}
	var modelParam string
	if query.Has("model") {
		param := query.Get("model")

		modelParam = param
	} else {
	}
	var tagParam string
	if query.Has("tag") {
		param := query.Get("tag")

		tagParam = param
	} else {
	}
	var userAccountIdParam int64
	if query.Has("userAccountId") {
		param, err := parseNumericParameter[int64](
			query.Get("userAccountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "userAccountId", Err: err}, nil)
			return
		}

		userAccountIdParam = param
	} else {
	}
	var userAccountDisplayParam string
	if query.Has("userAccountDisplay") {
		param := query.Get("userAccountDisplay")

		userAccountDisplayParam = param
	} else {
	}
	var userAccountUsernameParam string
	if query.Has("userAccountUsername") {
		param := query.Get("userAccountUsername")

		userAccountUsernameParam = param
	} else {
	}
	var customIdParam int64
	if query.Has("customId") {
		param, err := parseNumericParameter[int64](
			query.Get("customId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customId", Err: err}, nil)
			return
		}

		customIdParam = param
	} else {
	}
	var customTypeParam string
	if query.Has("customType") {
		param := query.Get("customType")

		customTypeParam = param
	} else {
	}
	var customValueParam float64
	if query.Has("customValue") {
		param, err := parseNumericParameter[float64](
			query.Get("customValue"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customValue", Err: err}, nil)
			return
		}

		customValueParam = param
	} else {
	}
	var customValue2Param float64
	if query.Has("customValue2") {
		param, err := parseNumericParameter[float64](
			query.Get("customValue2"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customValue2", Err: err}, nil)
			return
		}

		customValue2Param = param
	} else {
	}
	var customLongParam int64
	if query.Has("customLong") {
		param, err := parseNumericParameter[int64](
			query.Get("customLong"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customLong", Err: err}, nil)
			return
		}

		customLongParam = param
	} else {
	}
	var customLong2Param int64
	if query.Has("customLong2") {
		param, err := parseNumericParameter[int64](
			query.Get("customLong2"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customLong2", Err: err}, nil)
			return
		}

		customLong2Param = param
	} else {
	}
	var customMessageParam string
	if query.Has("customMessage") {
		param := query.Get("customMessage")

		customMessageParam = param
	} else {
	}
	var customMessage2Param string
	if query.Has("customMessage2") {
		param := query.Get("customMessage2")

		customMessage2Param = param
	} else {
	}
	var groupByParam string
	if query.Has("groupBy") {
		param := query.Get("groupBy")

		groupByParam = param
	} else {
	}
	var distinctCountParam string
	if query.Has("distinctCount") {
		param := query.Get("distinctCount")

		distinctCountParam = param
	} else {
	}
	var sumColumnParam string
	if query.Has("sumColumn") {
		param := query.Get("sumColumn")

		sumColumnParam = param
	} else {
	}
	var sortFieldParam string
	if query.Has("sortField") {
		param := query.Get("sortField")

		sortFieldParam = param
	} else {
	}
	var descendingParam bool
	if query.Has("descending") {
		param, err := parseBoolParameter(
			query.Get("descending"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "descending", Err: err}, nil)
			return
		}

		descendingParam = param
	} else {
	}
	var hideUnknownParam bool
	if query.Has("hideUnknown") {
		param, err := parseBoolParameter(
			query.Get("hideUnknown"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "hideUnknown", Err: err}, nil)
			return
		}

		hideUnknownParam = param
	} else {
	}
	var responseFormatParam string
	if query.Has("responseFormat") {
		param := query.Get("responseFormat")

		responseFormatParam = param
	} else {
	}
	var lParam int32
	if query.Has("_l") {
		param, err := parseNumericParameter[int32](
			query.Get("_l"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "_l", Err: err}, nil)
			return
		}

		lParam = param
	} else {
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.FilteredUsage(r.Context(), deviceIdParam, accountIdParam, applicationIdParam, appKeyParam, startDateParam, endDateParam, deviceTypeParam, deviceParam, deviceOSParam, genderParam, ageGroupParam, countryParam, stateParam, cityParam, zipParam, modelParam, tagParam, userAccountIdParam, userAccountDisplayParam, userAccountUsernameParam, customIdParam, customTypeParam, customValueParam, customValue2Param, customLongParam, customLong2Param, customMessageParam, customMessage2Param, groupByParam, distinctCountParam, sumColumnParam, sortFieldParam, descendingParam, hideUnknownParam, responseFormatParam, lParam, limitParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// Usage - Create Usage Record
func (c *AnalyticsAPIController) Usage(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var tagParam string
	if query.Has("tag") {
		param := query.Get("tag")

		tagParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "tag"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var applicationIdParam int64
	if query.Has("applicationId") {
		param, err := parseNumericParameter[int64](
			query.Get("applicationId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "applicationId", Err: err}, nil)
			return
		}

		applicationIdParam = param
	} else {
	}
	var appKeyParam string
	if query.Has("appKey") {
		param := query.Get("appKey")

		appKeyParam = param
	} else {
	}
	var appVersionParam string
	if query.Has("appVersion") {
		param := query.Get("appVersion")

		appVersionParam = param
	} else {
	}
	var deviceParam string
	if query.Has("device") {
		param := query.Get("device")

		deviceParam = param
	} else {
	}
	var deviceTypeParam string
	if query.Has("deviceType") {
		param := query.Get("deviceType")

		deviceTypeParam = param
	} else {
	}
	var deviceOSParam string
	if query.Has("deviceOS") {
		param := query.Get("deviceOS")

		deviceOSParam = param
	} else {
	}
	var modelParam string
	if query.Has("model") {
		param := query.Get("model")

		modelParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	var customIdParam int64
	if query.Has("customId") {
		param, err := parseNumericParameter[int64](
			query.Get("customId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customId", Err: err}, nil)
			return
		}

		customIdParam = param
	} else {
	}
	var customTypeParam string
	if query.Has("customType") {
		param := query.Get("customType")

		customTypeParam = param
	} else {
	}
	var achievementIncrementParam int64
	if query.Has("achievementIncrement") {
		param, err := parseNumericParameter[int64](
			query.Get("achievementIncrement"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "achievementIncrement", Err: err}, nil)
			return
		}

		achievementIncrementParam = param
	} else {
	}
	var cityParam string
	if query.Has("city") {
		param := query.Get("city")

		cityParam = param
	} else {
	}
	var stateParam string
	if query.Has("state") {
		param := query.Get("state")

		stateParam = param
	} else {
	}
	var countryParam string
	if query.Has("country") {
		param := query.Get("country")

		countryParam = param
	} else {
	}
	var zipParam string
	if query.Has("zip") {
		param := query.Get("zip")

		zipParam = param
	} else {
	}
	var locationDescriptionParam string
	if query.Has("locationDescription") {
		param := query.Get("locationDescription")

		locationDescriptionParam = param
	} else {
	}
	var clientTimeParam int64
	if query.Has("clientTime") {
		param, err := parseNumericParameter[int64](
			query.Get("clientTime"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "clientTime", Err: err}, nil)
			return
		}

		clientTimeParam = param
	} else {
	}
	var errorMessageParam string
	if query.Has("errorMessage") {
		param := query.Get("errorMessage")

		errorMessageParam = param
	} else {
	}
	var ipParam string
	if query.Has("ip") {
		param := query.Get("ip")

		ipParam = param
	} else {
	}
	var userAgentParam string
	if query.Has("userAgent") {
		param := query.Get("userAgent")

		userAgentParam = param
	} else {
	}
	var backgroundEventParam bool
	if query.Has("backgroundEvent") {
		param, err := parseBoolParameter(
			query.Get("backgroundEvent"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "backgroundEvent", Err: err}, nil)
			return
		}

		backgroundEventParam = param
	} else {
	}
	var customMessageParam string
	if query.Has("customMessage") {
		param := query.Get("customMessage")

		customMessageParam = param
	} else {
	}
	var customMessage2Param string
	if query.Has("customMessage2") {
		param := query.Get("customMessage2")

		customMessage2Param = param
	} else {
	}
	var customValueParam float64
	if query.Has("customValue") {
		param, err := parseNumericParameter[float64](
			query.Get("customValue"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customValue", Err: err}, nil)
			return
		}

		customValueParam = param
	} else {
	}
	var customValue2Param float64
	if query.Has("customValue2") {
		param, err := parseNumericParameter[float64](
			query.Get("customValue2"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customValue2", Err: err}, nil)
			return
		}

		customValue2Param = param
	} else {
	}
	var customLongParam int64
	if query.Has("customLong") {
		param, err := parseNumericParameter[int64](
			query.Get("customLong"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customLong", Err: err}, nil)
			return
		}

		customLongParam = param
	} else {
	}
	var customLong2Param int64
	if query.Has("customLong2") {
		param, err := parseNumericParameter[int64](
			query.Get("customLong2"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "customLong2", Err: err}, nil)
			return
		}

		customLong2Param = param
	} else {
	}
	result, err := c.service.Usage(r.Context(), tagParam, deviceIdParam, accountIdParam, applicationIdParam, appKeyParam, appVersionParam, deviceParam, deviceTypeParam, deviceOSParam, modelParam, latitudeParam, longitudeParam, customIdParam, customTypeParam, achievementIncrementParam, cityParam, stateParam, countryParam, zipParam, locationDescriptionParam, clientTimeParam, errorMessageParam, ipParam, userAgentParam, backgroundEventParam, customMessageParam, customMessage2Param, customValueParam, customValue2Param, customLongParam, customLong2Param)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// UsageBatch - Create Multiple Usage Records
func (c *AnalyticsAPIController) UsageBatch(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var appKeyParam string
	if query.Has("appKey") {
		param := query.Get("appKey")

		appKeyParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "appKey"}, nil)
		return
	}
	var deviceParam string
	if query.Has("device") {
		param := query.Get("device")

		deviceParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "device"}, nil)
		return
	}
	var dataParam string
	if query.Has("data") {
		param := query.Get("data")

		dataParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "data"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var appVersionParam string
	if query.Has("appVersion") {
		param := query.Get("appVersion")

		appVersionParam = param
	} else {
	}
	var deviceTypeParam string
	if query.Has("deviceType") {
		param := query.Get("deviceType")

		deviceTypeParam = param
	} else {
	}
	var deviceOSParam string
	if query.Has("deviceOS") {
		param := query.Get("deviceOS")

		deviceOSParam = param
	} else {
	}
	var modelParam string
	if query.Has("model") {
		param := query.Get("model")

		modelParam = param
	} else {
	}
	var updateRankingParam bool
	if query.Has("updateRanking") {
		param, err := parseBoolParameter(
			query.Get("updateRanking"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "updateRanking", Err: err}, nil)
			return
		}

		updateRankingParam = param
	} else {
	}
	var returnSummaryResponseParam bool
	if query.Has("returnSummaryResponse") {
		param, err := parseBoolParameter(
			query.Get("returnSummaryResponse"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "returnSummaryResponse", Err: err}, nil)
			return
		}

		returnSummaryResponseParam = param
	} else {
	}
	result, err := c.service.UsageBatch(r.Context(), appKeyParam, deviceParam, dataParam, deviceIdParam, accountIdParam, appVersionParam, deviceTypeParam, deviceOSParam, modelParam, updateRankingParam, returnSummaryResponseParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// Activities - Get User Activity
func (c *AnalyticsAPIController) Activities(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var startParam int32
	if query.Has("start") {
		param, err := parseNumericParameter[int32](
			query.Get("start"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "start", Err: err}, nil)
			return
		}

		startParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "start"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "limit"}, nil)
		return
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "accountId"}, nil)
		return
	}
	result, err := c.service.Activities(r.Context(), startParam, limitParam, accountIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}
