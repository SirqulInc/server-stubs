// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

/*
 * Sirqul IoT Platform
 *
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * API version: 3.16
 * Contact: info@sirqul.com
 */

package openapi

import (
	"net/http"
	"strings"
	"os"

	"github.com/gorilla/mux"
)

// ThemeDescriptorAPIController binds http requests to an api service and writes the service results to the http response
type ThemeDescriptorAPIController struct {
	service ThemeDescriptorAPIServicer
	errorHandler ErrorHandler
}

// ThemeDescriptorAPIOption for how the controller is set up.
type ThemeDescriptorAPIOption func(*ThemeDescriptorAPIController)

// WithThemeDescriptorAPIErrorHandler inject ErrorHandler into controller
func WithThemeDescriptorAPIErrorHandler(h ErrorHandler) ThemeDescriptorAPIOption {
	return func(c *ThemeDescriptorAPIController) {
		c.errorHandler = h
	}
}

// NewThemeDescriptorAPIController creates a default api controller
func NewThemeDescriptorAPIController(s ThemeDescriptorAPIServicer, opts ...ThemeDescriptorAPIOption) *ThemeDescriptorAPIController {
	controller := &ThemeDescriptorAPIController{
		service:      s,
		errorHandler: DefaultErrorHandler,
	}

	for _, opt := range opts {
		opt(controller)
	}

	return controller
}

// Routes returns all the api routes for the ThemeDescriptorAPIController
func (c *ThemeDescriptorAPIController) Routes() Routes {
	return Routes{
		"AddOrUpdateThemeDescriptor": Route{
			"AddOrUpdateThemeDescriptor",
			strings.ToUpper("Post"),
			"/api/{version}/consumer/theme",
			c.AddOrUpdateThemeDescriptor,
		},
		"GetThemeDescriptor": Route{
			"GetThemeDescriptor",
			strings.ToUpper("Get"),
			"/api/{version}/consumer/theme/get",
			c.GetThemeDescriptor,
		},
		"RemoveThemeDescriptor": Route{
			"RemoveThemeDescriptor",
			strings.ToUpper("Post"),
			"/api/{version}/consumer/theme/remove",
			c.RemoveThemeDescriptor,
		},
		"GetThemeDescriptors": Route{
			"GetThemeDescriptors",
			strings.ToUpper("Get"),
			"/api/{version}/consumer/theme/search",
			c.GetThemeDescriptors,
		},
	}
}

// OrderedRoutes returns all the api routes in a deterministic order for the ThemeDescriptorAPIController
func (c *ThemeDescriptorAPIController) OrderedRoutes() []Route {
	return []Route{
		Route{
			"AddOrUpdateThemeDescriptor",
			strings.ToUpper("Post"),
			"/api/{version}/consumer/theme",
			c.AddOrUpdateThemeDescriptor,
		},
		Route{
			"GetThemeDescriptor",
			strings.ToUpper("Get"),
			"/api/{version}/consumer/theme/get",
			c.GetThemeDescriptor,
		},
		Route{
			"RemoveThemeDescriptor",
			strings.ToUpper("Post"),
			"/api/{version}/consumer/theme/remove",
			c.RemoveThemeDescriptor,
		},
		Route{
			"GetThemeDescriptors",
			strings.ToUpper("Get"),
			"/api/{version}/consumer/theme/search",
			c.GetThemeDescriptors,
		},
	}
}



// AddOrUpdateThemeDescriptor - Create/Update Theme
func (c *ThemeDescriptorAPIController) AddOrUpdateThemeDescriptor(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var publicReadParam bool
	if query.Has("publicRead") {
		param, err := parseBoolParameter(
			query.Get("publicRead"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "publicRead", Err: err}, nil)
			return
		}

		publicReadParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "publicRead"}, nil)
		return
	}
	var publicWriteParam bool
	if query.Has("publicWrite") {
		param, err := parseBoolParameter(
			query.Get("publicWrite"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "publicWrite", Err: err}, nil)
			return
		}

		publicWriteParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "publicWrite"}, nil)
		return
	}
	var publicDeleteParam bool
	if query.Has("publicDelete") {
		param, err := parseBoolParameter(
			query.Get("publicDelete"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "publicDelete", Err: err}, nil)
			return
		}

		publicDeleteParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "publicDelete"}, nil)
		return
	}
	var publicAddParam bool
	if query.Has("publicAdd") {
		param, err := parseBoolParameter(
			query.Get("publicAdd"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "publicAdd", Err: err}, nil)
			return
		}

		publicAddParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "publicAdd"}, nil)
		return
	}
	var visibilityParam string
	if query.Has("visibility") {
		param := query.Get("visibility")

		visibilityParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "visibility"}, nil)
		return
	}
	var includeFriendGroupParam bool
	if query.Has("includeFriendGroup") {
		param, err := parseBoolParameter(
			query.Get("includeFriendGroup"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "includeFriendGroup", Err: err}, nil)
			return
		}

		includeFriendGroupParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "includeFriendGroup"}, nil)
		return
	}
	var completeWithDefaultValuesParam bool
	if query.Has("completeWithDefaultValues") {
		param, err := parseBoolParameter(
			query.Get("completeWithDefaultValues"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "completeWithDefaultValues", Err: err}, nil)
			return
		}

		completeWithDefaultValuesParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "completeWithDefaultValues"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var gameTypeParam string
	if query.Has("gameType") {
		param := query.Get("gameType")

		gameTypeParam = param
	} else {
	}
	var themeDescriptorIdParam int64
	if query.Has("themeDescriptorId") {
		param, err := parseNumericParameter[int64](
			query.Get("themeDescriptorId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "themeDescriptorId", Err: err}, nil)
			return
		}

		themeDescriptorIdParam = param
	} else {
	}
	var titleParam string
	if query.Has("title") {
		param := query.Get("title")

		titleParam = param
	} else {
	}
	var descriptionParam string
	if query.Has("description") {
		param := query.Get("description")

		descriptionParam = param
	} else {
	}
	var connectionIdsToAddParam string
	if query.Has("connectionIdsToAdd") {
		param := query.Get("connectionIdsToAdd")

		connectionIdsToAddParam = param
	} else {
	}
	var connectionGroupIdsToAddParam string
	if query.Has("connectionGroupIdsToAdd") {
		param := query.Get("connectionGroupIdsToAdd")

		connectionGroupIdsToAddParam = param
	} else {
	}
	var appVersionParam string
	if query.Has("appVersion") {
		param := query.Get("appVersion")

		appVersionParam = param
	} else {
	}
	var colorValueJsonParam string
	if query.Has("colorValueJson") {
		param := query.Get("colorValueJson")

		colorValueJsonParam = param
	} else {
	}
	var stringReplacerJsonParam string
	if query.Has("stringReplacerJson") {
		param := query.Get("stringReplacerJson")

		stringReplacerJsonParam = param
	} else {
	}
	var customJsonObjectsParam string
	if query.Has("customJsonObjects") {
		param := query.Get("customJsonObjects")

		customJsonObjectsParam = param
	} else {
	}
	var iconImageParam *os.File
	if query.Has("iconImage") {
		param := *os.File(query.Get("iconImage"))

		iconImageParam = param
	} else {
	}
	var sceneAtlasImageParam *os.File
	if query.Has("sceneAtlasImage") {
		param := *os.File(query.Get("sceneAtlasImage"))

		sceneAtlasImageParam = param
	} else {
	}
	var bgImageParam *os.File
	if query.Has("bgImage") {
		param := *os.File(query.Get("bgImage"))

		bgImageParam = param
	} else {
	}
	var bgSoundParam *os.File
	if query.Has("bgSound") {
		param := *os.File(query.Get("bgSound"))

		bgSoundParam = param
	} else {
	}
	var musicSelectionParam string
	if query.Has("musicSelection") {
		param := query.Get("musicSelection")

		musicSelectionParam = param
	} else {
	}
	var locationDescriptionParam string
	if query.Has("locationDescription") {
		param := query.Get("locationDescription")

		locationDescriptionParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.AddOrUpdateThemeDescriptor(r.Context(), versionParam, publicReadParam, publicWriteParam, publicDeleteParam, publicAddParam, visibilityParam, includeFriendGroupParam, completeWithDefaultValuesParam, deviceIdParam, accountIdParam, gameTypeParam, themeDescriptorIdParam, titleParam, descriptionParam, connectionIdsToAddParam, connectionGroupIdsToAddParam, appVersionParam, colorValueJsonParam, stringReplacerJsonParam, customJsonObjectsParam, iconImageParam, sceneAtlasImageParam, bgImageParam, bgSoundParam, musicSelectionParam, locationDescriptionParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// GetThemeDescriptor - Get Theme
func (c *ThemeDescriptorAPIController) GetThemeDescriptor(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var themeDescriptorIdParam int64
	if query.Has("themeDescriptorId") {
		param, err := parseNumericParameter[int64](
			query.Get("themeDescriptorId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "themeDescriptorId", Err: err}, nil)
			return
		}

		themeDescriptorIdParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "themeDescriptorId"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var gameTypeParam string
	if query.Has("gameType") {
		param := query.Get("gameType")

		gameTypeParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.GetThemeDescriptor(r.Context(), versionParam, themeDescriptorIdParam, deviceIdParam, accountIdParam, gameTypeParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// RemoveThemeDescriptor - Delete Theme
func (c *ThemeDescriptorAPIController) RemoveThemeDescriptor(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var themeDescriptorIdParam int64
	if query.Has("themeDescriptorId") {
		param, err := parseNumericParameter[int64](
			query.Get("themeDescriptorId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "themeDescriptorId", Err: err}, nil)
			return
		}

		themeDescriptorIdParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "themeDescriptorId"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var gameTypeParam string
	if query.Has("gameType") {
		param := query.Get("gameType")

		gameTypeParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.RemoveThemeDescriptor(r.Context(), versionParam, themeDescriptorIdParam, deviceIdParam, accountIdParam, gameTypeParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// GetThemeDescriptors - Search Themes
func (c *ThemeDescriptorAPIController) GetThemeDescriptors(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var filterParam string
	if query.Has("filter") {
		param := query.Get("filter")

		filterParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "filter"}, nil)
		return
	}
	var sortFieldParam string
	if query.Has("sortField") {
		param := query.Get("sortField")

		sortFieldParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "sortField"}, nil)
		return
	}
	var descendingParam bool
	if query.Has("descending") {
		param, err := parseBoolParameter(
			query.Get("descending"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "descending", Err: err}, nil)
			return
		}

		descendingParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "descending"}, nil)
		return
	}
	var startParam int32
	if query.Has("start") {
		param, err := parseNumericParameter[int32](
			query.Get("start"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "start", Err: err}, nil)
			return
		}

		startParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "start"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "limit"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var gameTypeParam string
	if query.Has("gameType") {
		param := query.Get("gameType")

		gameTypeParam = param
	} else {
	}
	var contestTypeParam string
	if query.Has("contestType") {
		param := query.Get("contestType")

		contestTypeParam = param
	} else {
	}
	var ownerIdParam int64
	if query.Has("ownerId") {
		param, err := parseNumericParameter[int64](
			query.Get("ownerId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "ownerId", Err: err}, nil)
			return
		}

		ownerIdParam = param
	} else {
	}
	var qParam string
	if query.Has("q") {
		param := query.Get("q")

		qParam = param
	} else {
	}
	var keywordParam string
	if query.Has("keyword") {
		param := query.Get("keyword")

		keywordParam = param
	} else {
	}
	var iParam int32
	if query.Has("_i") {
		param, err := parseNumericParameter[int32](
			query.Get("_i"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "_i", Err: err}, nil)
			return
		}

		iParam = param
	} else {
	}
	var lParam int32
	if query.Has("_l") {
		param, err := parseNumericParameter[int32](
			query.Get("_l"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "_l", Err: err}, nil)
			return
		}

		lParam = param
	} else {
	}
	var dateCreatedParam int64
	if query.Has("dateCreated") {
		param, err := parseNumericParameter[int64](
			query.Get("dateCreated"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "dateCreated", Err: err}, nil)
			return
		}

		dateCreatedParam = param
	} else {
	}
	var appVersionParam string
	if query.Has("appVersion") {
		param := query.Get("appVersion")

		appVersionParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.GetThemeDescriptors(r.Context(), versionParam, filterParam, sortFieldParam, descendingParam, startParam, limitParam, deviceIdParam, accountIdParam, gameTypeParam, contestTypeParam, ownerIdParam, qParam, keywordParam, iParam, lParam, dateCreatedParam, appVersionParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}
