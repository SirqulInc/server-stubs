// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

/*
 * Sirqul IoT Platform
 *
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * API version: 3.16
 * Contact: info@sirqul.com
 */

package openapi

import (
	"net/http"
	"strings"

	"github.com/gorilla/mux"
)

// OfferStatusAPIController binds http requests to an api service and writes the service results to the http response
type OfferStatusAPIController struct {
	service OfferStatusAPIServicer
	errorHandler ErrorHandler
}

// OfferStatusAPIOption for how the controller is set up.
type OfferStatusAPIOption func(*OfferStatusAPIController)

// WithOfferStatusAPIErrorHandler inject ErrorHandler into controller
func WithOfferStatusAPIErrorHandler(h ErrorHandler) OfferStatusAPIOption {
	return func(c *OfferStatusAPIController) {
		c.errorHandler = h
	}
}

// NewOfferStatusAPIController creates a default api controller
func NewOfferStatusAPIController(s OfferStatusAPIServicer, opts ...OfferStatusAPIOption) *OfferStatusAPIController {
	controller := &OfferStatusAPIController{
		service:      s,
		errorHandler: DefaultErrorHandler,
	}

	for _, opt := range opts {
		opt(controller)
	}

	return controller
}

// Routes returns all the api routes for the OfferStatusAPIController
func (c *OfferStatusAPIController) Routes() Routes {
	return Routes{
		"CreateOfferTransactionStatus": Route{
			"CreateOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/create",
			c.CreateOfferTransactionStatus,
		},
		"DeleteOfferTransactionStatus": Route{
			"DeleteOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/delete",
			c.DeleteOfferTransactionStatus,
		},
		"GetOfferTransactionStatus": Route{
			"GetOfferTransactionStatus",
			strings.ToUpper("Get"),
			"/api/{version}/offer/status/get",
			c.GetOfferTransactionStatus,
		},
		"SearchOfferTransactionStatuses": Route{
			"SearchOfferTransactionStatuses",
			strings.ToUpper("Get"),
			"/api/{version}/offer/status/search",
			c.SearchOfferTransactionStatuses,
		},
		"UpdateOfferTransactionStatus": Route{
			"UpdateOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/update",
			c.UpdateOfferTransactionStatus,
		},
	}
}

// OrderedRoutes returns all the api routes in a deterministic order for the OfferStatusAPIController
func (c *OfferStatusAPIController) OrderedRoutes() []Route {
	return []Route{
		Route{
			"CreateOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/create",
			c.CreateOfferTransactionStatus,
		},
		Route{
			"DeleteOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/delete",
			c.DeleteOfferTransactionStatus,
		},
		Route{
			"GetOfferTransactionStatus",
			strings.ToUpper("Get"),
			"/api/{version}/offer/status/get",
			c.GetOfferTransactionStatus,
		},
		Route{
			"SearchOfferTransactionStatuses",
			strings.ToUpper("Get"),
			"/api/{version}/offer/status/search",
			c.SearchOfferTransactionStatuses,
		},
		Route{
			"UpdateOfferTransactionStatus",
			strings.ToUpper("Post"),
			"/api/{version}/offer/status/update",
			c.UpdateOfferTransactionStatus,
		},
	}
}



// CreateOfferTransactionStatus - Create Offer Status
func (c *OfferStatusAPIController) CreateOfferTransactionStatus(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var nameParam string
	if query.Has("name") {
		param := query.Get("name")

		nameParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "name"}, nil)
		return
	}
	var codeParam int32
	if query.Has("code") {
		param, err := parseNumericParameter[int32](
			query.Get("code"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "code", Err: err}, nil)
			return
		}

		codeParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "code"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	var descriptionParam string
	if query.Has("description") {
		param := query.Get("description")

		descriptionParam = param
	} else {
	}
	var roleParam string
	if query.Has("role") {
		param := query.Get("role")

		roleParam = param
	} else {
		param := "ANY"
		roleParam = param
	}
	var activeParam bool
	if query.Has("active") {
		param, err := parseBoolParameter(
			query.Get("active"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "active", Err: err}, nil)
			return
		}

		activeParam = param
	} else {
		var param bool = true
		activeParam = param
	}
	var applicationIdsParam string
	if query.Has("applicationIds") {
		param := query.Get("applicationIds")

		applicationIdsParam = param
	} else {
	}
	result, err := c.service.CreateOfferTransactionStatus(r.Context(), versionParam, nameParam, codeParam, deviceIdParam, accountIdParam, latitudeParam, longitudeParam, descriptionParam, roleParam, activeParam, applicationIdsParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// DeleteOfferTransactionStatus - Delete Offer Status
func (c *OfferStatusAPIController) DeleteOfferTransactionStatus(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var statusIdParam int64
	if query.Has("statusId") {
		param, err := parseNumericParameter[int64](
			query.Get("statusId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "statusId", Err: err}, nil)
			return
		}

		statusIdParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "statusId"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.DeleteOfferTransactionStatus(r.Context(), versionParam, statusIdParam, deviceIdParam, accountIdParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// GetOfferTransactionStatus - Get Offer Status
func (c *OfferStatusAPIController) GetOfferTransactionStatus(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var statusIdParam int64
	if query.Has("statusId") {
		param, err := parseNumericParameter[int64](
			query.Get("statusId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "statusId", Err: err}, nil)
			return
		}

		statusIdParam = param
	} else {
		c.errorHandler(w, r, &RequiredError{Field: "statusId"}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	result, err := c.service.GetOfferTransactionStatus(r.Context(), versionParam, statusIdParam, deviceIdParam, accountIdParam, latitudeParam, longitudeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// SearchOfferTransactionStatuses - Search Offer Status
func (c *OfferStatusAPIController) SearchOfferTransactionStatuses(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	var keywordParam string
	if query.Has("keyword") {
		param := query.Get("keyword")

		keywordParam = param
	} else {
	}
	var roleParam string
	if query.Has("role") {
		param := query.Get("role")

		roleParam = param
	} else {
	}
	var appKeyParam string
	if query.Has("appKey") {
		param := query.Get("appKey")

		appKeyParam = param
	} else {
	}
	var sortFieldParam string
	if query.Has("sortField") {
		param := query.Get("sortField")

		sortFieldParam = param
	} else {
		param := "CODE"
		sortFieldParam = param
	}
	var descendingParam bool
	if query.Has("descending") {
		param, err := parseBoolParameter(
			query.Get("descending"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "descending", Err: err}, nil)
			return
		}

		descendingParam = param
	} else {
		var param bool = true
		descendingParam = param
	}
	var startParam int32
	if query.Has("start") {
		param, err := parseNumericParameter[int32](
			query.Get("start"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "start", Err: err}, nil)
			return
		}

		startParam = param
	} else {
		var param int32 = 0
		startParam = param
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var includeInactiveParam bool
	if query.Has("includeInactive") {
		param, err := parseBoolParameter(
			query.Get("includeInactive"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "includeInactive", Err: err}, nil)
			return
		}

		includeInactiveParam = param
	} else {
		var param bool = false
		includeInactiveParam = param
	}
	result, err := c.service.SearchOfferTransactionStatuses(r.Context(), versionParam, deviceIdParam, accountIdParam, latitudeParam, longitudeParam, keywordParam, roleParam, appKeyParam, sortFieldParam, descendingParam, startParam, limitParam, includeInactiveParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// UpdateOfferTransactionStatus - Update Offer Status
func (c *OfferStatusAPIController) UpdateOfferTransactionStatus(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	versionParam, err := parseNumericParameter[float32](
		params["version"],
		WithRequire[float32](parseFloat32),
	)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Param: "version", Err: err}, nil)
		return
	}
	var deviceIdParam string
	if query.Has("deviceId") {
		param := query.Get("deviceId")

		deviceIdParam = param
	} else {
	}
	var accountIdParam int64
	if query.Has("accountId") {
		param, err := parseNumericParameter[int64](
			query.Get("accountId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "accountId", Err: err}, nil)
			return
		}

		accountIdParam = param
	} else {
	}
	var latitudeParam float64
	if query.Has("latitude") {
		param, err := parseNumericParameter[float64](
			query.Get("latitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "latitude", Err: err}, nil)
			return
		}

		latitudeParam = param
	} else {
	}
	var longitudeParam float64
	if query.Has("longitude") {
		param, err := parseNumericParameter[float64](
			query.Get("longitude"),
			WithParse[float64](parseFloat64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "longitude", Err: err}, nil)
			return
		}

		longitudeParam = param
	} else {
	}
	var statusIdParam int64
	if query.Has("statusId") {
		param, err := parseNumericParameter[int64](
			query.Get("statusId"),
			WithParse[int64](parseInt64),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "statusId", Err: err}, nil)
			return
		}

		statusIdParam = param
	} else {
	}
	var nameParam string
	if query.Has("name") {
		param := query.Get("name")

		nameParam = param
	} else {
	}
	var descriptionParam string
	if query.Has("description") {
		param := query.Get("description")

		descriptionParam = param
	} else {
	}
	var codeParam int32
	if query.Has("code") {
		param, err := parseNumericParameter[int32](
			query.Get("code"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "code", Err: err}, nil)
			return
		}

		codeParam = param
	} else {
	}
	var roleParam string
	if query.Has("role") {
		param := query.Get("role")

		roleParam = param
	} else {
	}
	var activeParam bool
	if query.Has("active") {
		param, err := parseBoolParameter(
			query.Get("active"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "active", Err: err}, nil)
			return
		}

		activeParam = param
	} else {
	}
	var applicationIdsParam string
	if query.Has("applicationIds") {
		param := query.Get("applicationIds")

		applicationIdsParam = param
	} else {
	}
	result, err := c.service.UpdateOfferTransactionStatus(r.Context(), versionParam, deviceIdParam, accountIdParam, latitudeParam, longitudeParam, statusIdParam, nameParam, descriptionParam, codeParam, roleParam, activeParam, applicationIdsParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}
