<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\MissionApiInterface;

class MissionController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly MissionApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation createMission
     *
     * Create Mission.
     *
     */
    public function createMission(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'title' => [
                    'required',
                    'string',
                ],
                'description' => [
                    'string',
                ],
                'subType' => [
                    'string',
                ],
                'startDate' => [
                    'integer',
                ],
                'endDate' => [
                    'integer',
                ],
                'active' => [
                    'boolean',
                ],
                'gameLevelIds' => [
                    'string',
                ],
                'creativeIds' => [
                    'string',
                ],
                'audienceIds' => [
                    'string',
                ],
                'missionTask' => [
                    'string',
                ],
                'formatType' => [
                    'string',
                ],
                'offerId' => [
                    'integer',
                ],
                'balance' => [
                ],
                'advancedReporting' => [
                    'boolean',
                ],
                'allocateTickets' => [
                    'boolean',
                ],
                'ticketCount' => [
                    'integer',
                ],
                'ticketType' => [
                    'string',
                ],
                'points' => [
                    'integer',
                ],
                'metaData' => [
                    'string',
                ],
                'applicationIds' => [
                    'string',
                ],
                'devices' => [
                    'string',
                ],
                'deviceIds' => [
                    'string',
                ],
                'deviceVersions' => [
                    'string',
                ],
                'locations' => [
                    'string',
                ],
                'radius' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $title = $request->string('title')->value();

        $description = $request->string('description')->value();

        $subType = $request->string('subType')->value();

        $startDate = $request->integer('startDate');

        $endDate = $request->integer('endDate');

        $active = $request->boolean('active');

        $gameLevelIds = $request->string('gameLevelIds')->value();

        $creativeIds = $request->string('creativeIds')->value();

        $audienceIds = $request->string('audienceIds')->value();

        $missionTask = $request->string('missionTask')->value();

        $formatType = $request->string('formatType')->value();

        $offerId = $request->integer('offerId');

        $balance = $request->float('balance');

        $advancedReporting = $request->boolean('advancedReporting');

        $allocateTickets = $request->boolean('allocateTickets');

        $ticketCount = $request->integer('ticketCount');

        $ticketType = $request->string('ticketType')->value();

        $points = $request->integer('points');

        $metaData = $request->string('metaData')->value();

        $applicationIds = $request->string('applicationIds')->value();

        $devices = $request->string('devices')->value();

        $deviceIds = $request->string('deviceIds')->value();

        $deviceVersions = $request->string('deviceVersions')->value();

        $locations = $request->string('locations')->value();

        $radius = $request->string('radius')->value();


        $apiResult = $this->api->createMission($accountId, $title, $description, $subType, $startDate, $endDate, $active, $gameLevelIds, $creativeIds, $audienceIds, $missionTask, $formatType, $offerId, $balance, $advancedReporting, $allocateTickets, $ticketCount, $ticketType, $points, $metaData, $applicationIds, $devices, $deviceIds, $deviceVersions, $locations, $radius);

        if ($apiResult instanceof \OpenAPI\Server\Model\MissionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteMission
     *
     * Delete Mission.
     *
     */
    public function deleteMission(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');


        $apiResult = $this->api->deleteMission($accountId, $missionId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation findMissions
     *
     * Find Missions.
     *
     */
    public function findMissions(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'appKey' => [
                    'required',
                    'string',
                ],
                'suffix' => [
                    'string',
                ],
                'type' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'appVersion' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'device' => [
                    'string',
                ],
                'deviceIdentifier' => [
                    'integer',
                ],
                'deviceVersion' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'includeGameData' => [
                    'boolean',
                ],
                'includeAudiences' => [
                    'boolean',
                ],
                'allocatesTickets' => [
                    'boolean',
                ],
                'randomize' => [
                    'boolean',
                ],
                'targetedAdsOnly' => [
                    'boolean',
                ],
                'missionIds' => [
                    'string',
                ],
                'audienceOperator' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $appKey = $request->string('appKey')->value();

        $suffix = $request->string('suffix')->value();

        $type = $request->string('type')->value();

        $accountId = $request->integer('accountId');

        $appVersion = $request->string('appVersion')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $device = $request->string('device')->value();

        $deviceIdentifier = $request->integer('deviceIdentifier');

        $deviceVersion = $request->string('deviceVersion')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $includeGameData = $request->boolean('includeGameData');

        $includeAudiences = $request->boolean('includeAudiences');

        $allocatesTickets = $request->boolean('allocatesTickets');

        $randomize = $request->boolean('randomize');

        $targetedAdsOnly = $request->boolean('targetedAdsOnly');

        $missionIds = $request->string('missionIds')->value();

        $audienceOperator = $request->string('audienceOperator')->value();


        $apiResult = $this->api->findMissions($appKey, $suffix, $type, $accountId, $appVersion, $latitude, $longitude, $device, $deviceIdentifier, $deviceVersion, $start, $limit, $includeGameData, $includeAudiences, $allocatesTickets, $randomize, $targetedAdsOnly, $missionIds, $audienceOperator);

        if ($apiResult instanceof \OpenAPI\Server\Model\MissionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getMission
     *
     * Get Mission.
     *
     */
    public function getMission(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'returnCreative' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');

        $returnCreative = $request->boolean('returnCreative');


        $apiResult = $this->api->getMission($accountId, $missionId, $returnCreative);

        if ($apiResult instanceof \OpenAPI\Server\Model\MissionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation importMission
     *
     * Import Mission.
     *
     */
    public function importMission(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'latitude' => [
                    'required',
                ],
                'longitude' => [
                    'required',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'keyword' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'adSize' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $appKey = $request->string('appKey')->value();

        $keyword = $request->string('keyword')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $adSize = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateApplicationPlacementSizeParameter::class);


        $apiResult = $this->api->importMission($accountId, $latitude, $longitude, $appKey, $keyword, $start, $limit, $adSize);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchMissionFormats
     *
     * Search Mission Formats.
     *
     */
    public function searchMissionFormats(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'start' => [
                    'required',
                    'integer',
                ],
                'limit' => [
                    'required',
                    'integer',
                ],
                'activeOnly' => [
                    'required',
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $activeOnly = $request->boolean('activeOnly');


        $apiResult = $this->api->searchMissionFormats($start, $limit, $activeOnly);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchMissions
     *
     * Search Missions.
     *
     */
    public function searchMissions(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'keyword' => [
                    'string',
                ],
                'subType' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'includeGameData' => [
                    'boolean',
                ],
                'includeAudiences' => [
                    'boolean',
                ],
                'includeInactive' => [
                    'boolean',
                ],
                'suffix' => [
                    'string',
                ],
                'sortField' => [
                    'string',
                ],
                'descending' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $keyword = $request->string('keyword')->value();

        $subType = $request->string('subType')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $includeGameData = $request->boolean('includeGameData');

        $includeAudiences = $request->boolean('includeAudiences');

        $includeInactive = $request->boolean('includeInactive');

        $suffix = $request->string('suffix')->value();

        $sortField = $request->string('sortField')->value();

        $descending = $request->boolean('descending');


        $apiResult = $this->api->searchMissions($accountId, $keyword, $subType, $start, $limit, $includeGameData, $includeAudiences, $includeInactive, $suffix, $sortField, $descending);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchMissionsByBillableEntity
     *
     * Search Missions by Billable Entity.
     *
     */
    public function searchMissionsByBillableEntity(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'keyword' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'includeGameData' => [
                    'boolean',
                ],
                'includeAudiences' => [
                    'boolean',
                ],
                'includeInactive' => [
                    'boolean',
                ],
                'suffix' => [
                    'string',
                ],
                'sortField' => [
                    'string',
                ],
                'descending' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $keyword = $request->string('keyword')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $includeGameData = $request->boolean('includeGameData');

        $includeAudiences = $request->boolean('includeAudiences');

        $includeInactive = $request->boolean('includeInactive');

        $suffix = $request->string('suffix')->value();

        $sortField = $request->string('sortField')->value();

        $descending = $request->boolean('descending');


        $apiResult = $this->api->searchMissionsByBillableEntity($accountId, $keyword, $start, $limit, $includeGameData, $includeAudiences, $includeInactive, $suffix, $sortField, $descending);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateMission
     *
     * Update Mission.
     *
     */
    public function updateMission(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'title' => [
                    'string',
                ],
                'description' => [
                    'string',
                ],
                'subType' => [
                    'string',
                ],
                'metaData' => [
                    'string',
                ],
                'startDate' => [
                    'integer',
                ],
                'endDate' => [
                    'integer',
                ],
                'active' => [
                    'boolean',
                ],
                'gameLevelIds' => [
                    'string',
                ],
                'creativeIds' => [
                    'string',
                ],
                'audienceIds' => [
                    'string',
                ],
                'offerId' => [
                    'integer',
                ],
                'balance' => [
                ],
                'advancedReporting' => [
                    'boolean',
                ],
                'allocateTickets' => [
                    'boolean',
                ],
                'ticketCount' => [
                    'integer',
                ],
                'ticketType' => [
                    'string',
                ],
                'points' => [
                    'integer',
                ],
                'applicationIds' => [
                    'string',
                ],
                'devices' => [
                    'string',
                ],
                'deviceIds' => [
                    'string',
                ],
                'deviceVersions' => [
                    'string',
                ],
                'locations' => [
                    'string',
                ],
                'radius' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');

        $title = $request->string('title')->value();

        $description = $request->string('description')->value();

        $subType = $request->string('subType')->value();

        $metaData = $request->string('metaData')->value();

        $startDate = $request->integer('startDate');

        $endDate = $request->integer('endDate');

        $active = $request->boolean('active');

        $gameLevelIds = $request->string('gameLevelIds')->value();

        $creativeIds = $request->string('creativeIds')->value();

        $audienceIds = $request->string('audienceIds')->value();

        $offerId = $request->integer('offerId');

        $balance = $request->float('balance');

        $advancedReporting = $request->boolean('advancedReporting');

        $allocateTickets = $request->boolean('allocateTickets');

        $ticketCount = $request->integer('ticketCount');

        $ticketType = $request->string('ticketType')->value();

        $points = $request->integer('points');

        $applicationIds = $request->string('applicationIds')->value();

        $devices = $request->string('devices')->value();

        $deviceIds = $request->string('deviceIds')->value();

        $deviceVersions = $request->string('deviceVersions')->value();

        $locations = $request->string('locations')->value();

        $radius = $request->string('radius')->value();


        $apiResult = $this->api->updateMission($accountId, $missionId, $title, $description, $subType, $metaData, $startDate, $endDate, $active, $gameLevelIds, $creativeIds, $audienceIds, $offerId, $balance, $advancedReporting, $allocateTickets, $ticketCount, $ticketType, $points, $applicationIds, $devices, $deviceIds, $deviceVersions, $locations, $radius);

        if ($apiResult instanceof \OpenAPI\Server\Model\MissionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
