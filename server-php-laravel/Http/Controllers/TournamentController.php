<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\TournamentApiInterface;

class TournamentController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly TournamentApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation createTournament
     *
     * Create Tournament.
     *
     */
    public function createTournament(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'title' => [
                    'required',
                    'string',
                ],
                'costToPlay' => [
                    'required',
                    'integer',
                ],
                'startDate' => [
                    'required',
                    'integer',
                ],
                'subType' => [
                    'string',
                ],
                'imageAssetId' => [
                    'integer',
                ],
                'secondsBetweenLevels' => [
                    'integer',
                ],
                'secondsForTieBreaker' => [
                    'integer',
                ],
                'secondsBetweenPacks' => [
                    'integer',
                ],
                'maximumLevelLength' => [
                    'integer',
                ],
                'costToPlayType' => [
                    'string',
                ],
                'minimumToPlay' => [
                    'integer',
                ],
                'startingLimit' => [
                    'integer',
                ],
                'availableLimit' => [
                    'integer',
                ],
                'description' => [
                    'string',
                ],
                'metaData' => [
                    'string',
                ],
                'audienceIds' => [
                    'string',
                ],
                'active' => [
                    'boolean',
                ],
                'enableBuyBack' => [
                    'boolean',
                ],
                'offerIds' => [
                    'string',
                ],
                'offerAssetId' => [
                    'integer',
                ],
                'fixedReward' => [
                    'boolean',
                ],
                'splitReward' => [
                ],
                'allocateTickets' => [
                    'boolean',
                ],
                'tournamentData' => [
                    'string',
                ],
                'missionType' => [
                ],
                'visibility' => [
                ],
                'preliminaryGroups' => [
                    'integer',
                ],
                'preliminaryGroupAdvancements' => [
                    'string',
                ],
                'enableMultipleEntries' => [
                    'boolean',
                ],
                'enableMultipleVotes' => [
                    'boolean',
                ],
                'featured' => [
                    'boolean',
                ],
                'winnerTag' => [
                    'string',
                ],
                'tieTag' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $appKey = $request->string('appKey')->value();

        $title = $request->string('title')->value();

        $costToPlay = $request->integer('costToPlay');

        $startDate = $request->integer('startDate');

        $subType = $request->string('subType')->value();

        $imageAssetId = $request->integer('imageAssetId');

        $secondsBetweenLevels = $request->integer('secondsBetweenLevels');

        $secondsForTieBreaker = $request->integer('secondsForTieBreaker');

        $secondsBetweenPacks = $request->integer('secondsBetweenPacks');

        $maximumLevelLength = $request->integer('maximumLevelLength');

        $costToPlayType = $request->string('costToPlayType')->value();

        $minimumToPlay = $request->integer('minimumToPlay');

        $startingLimit = $request->integer('startingLimit');

        $availableLimit = $request->integer('availableLimit');

        $description = $request->string('description')->value();

        $metaData = $request->string('metaData')->value();

        $audienceIds = $request->string('audienceIds')->value();

        $active = $request->boolean('active');

        $enableBuyBack = $request->boolean('enableBuyBack');

        $offerIds = $request->string('offerIds')->value();

        $offerAssetId = $request->integer('offerAssetId');

        $fixedReward = $request->boolean('fixedReward');

        $splitReward = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateTournamentSplitRewardParameter::class);

        $allocateTickets = $request->boolean('allocateTickets');

        $tournamentData = $request->string('tournamentData')->value();

        $missionType = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateTournamentMissionTypeParameter::class);

        $visibility = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateTournamentVisibilityParameter::class);

        $preliminaryGroups = $request->integer('preliminaryGroups');

        $preliminaryGroupAdvancements = $request->string('preliminaryGroupAdvancements')->value();

        $enableMultipleEntries = $request->boolean('enableMultipleEntries');

        $enableMultipleVotes = $request->boolean('enableMultipleVotes');

        $featured = $request->boolean('featured');

        $winnerTag = $request->string('winnerTag')->value();

        $tieTag = $request->string('tieTag')->value();


        $apiResult = $this->api->createTournament($version, $accountId, $appKey, $title, $costToPlay, $startDate, $subType, $imageAssetId, $secondsBetweenLevels, $secondsForTieBreaker, $secondsBetweenPacks, $maximumLevelLength, $costToPlayType, $minimumToPlay, $startingLimit, $availableLimit, $description, $metaData, $audienceIds, $active, $enableBuyBack, $offerIds, $offerAssetId, $fixedReward, $splitReward, $allocateTickets, $tournamentData, $missionType, $visibility, $preliminaryGroups, $preliminaryGroupAdvancements, $enableMultipleEntries, $enableMultipleVotes, $featured, $winnerTag, $tieTag);

        if ($apiResult instanceof \OpenAPI\Server\Model\TournamentResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteTournament
     *
     * Delete Tournament.
     *
     */
    public function deleteTournament(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');


        $apiResult = $this->api->deleteTournament($version, $accountId, $missionId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getTournament
     *
     * Get Tournament.
     *
     */
    public function getTournament(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'integer',
                ],
                'joinCode' => [
                    'string',
                ],
                'includeScores' => [
                ],
                'objectPreviewSize' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');

        $joinCode = $request->string('joinCode')->value();

        $includeScores = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\GetTournamentIncludeScoresParameter::class);

        $objectPreviewSize = $request->integer('objectPreviewSize');


        $apiResult = $this->api->getTournament($version, $accountId, $missionId, $joinCode, $includeScores, $objectPreviewSize);

        if ($apiResult instanceof \OpenAPI\Server\Model\TournamentResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchObjects
     *
     * Search Tournament Objects.
     *
     */
    public function searchObjects(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'gameLevelId' => [
                    'required',
                    'integer',
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $gameLevelId = $request->integer('gameLevelId');

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\SearchObjectsSortFieldParameter::class);

        $descending = $request->boolean('descending');

        $start = $request->integer('start');

        $limit = $request->integer('limit');


        $apiResult = $this->api->searchObjects($version, $accountId, $gameLevelId, $sortField, $descending, $start, $limit);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchRounds
     *
     * Search Tournament Rounds.
     *
     */
    public function searchRounds(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'status' => [
                    'string',
                ],
                'missionType' => [
                ],
                'currentOnly' => [
                    'boolean',
                ],
                'visibilities' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $appKey = $request->string('appKey')->value();

        $status = $request->string('status')->value();

        $missionType = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\SearchRoundsMissionTypeParameter::class);

        $currentOnly = $request->boolean('currentOnly');

        $visibilities = $request->string('visibilities')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');


        $apiResult = $this->api->searchRounds($version, $accountId, $appKey, $status, $missionType, $currentOnly, $visibilities, $start, $limit);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchTournaments
     *
     * Search Tournaments.
     *
     */
    public function searchTournaments(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'keyword' => [
                    'string',
                ],
                'subType' => [
                    'string',
                ],
                'includeInactive' => [
                    'boolean',
                ],
                'missionTypes' => [
                    'string',
                ],
                'filter' => [
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'visibility' => [
                    'string',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $appKey = $request->string('appKey')->value();

        $keyword = $request->string('keyword')->value();

        $subType = $request->string('subType')->value();

        $includeInactive = $request->boolean('includeInactive');

        $missionTypes = $request->string('missionTypes')->value();

        $filter = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\SearchTournamentsFilterParameter::class);

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\SearchTournamentsSortFieldParameter::class);

        $descending = $request->boolean('descending');

        $visibility = $request->string('visibility')->value();

        $start = $request->integer('start');

        $limit = $request->integer('limit');


        $apiResult = $this->api->searchTournaments($version, $accountId, $appKey, $keyword, $subType, $includeInactive, $missionTypes, $filter, $sortField, $descending, $visibility, $start, $limit);

        if ($apiResult instanceof \OpenAPI\Server\Model\MissionShortResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation submitTournamentScore
     *
     * Submit Tournament Score.
     *
     */
    public function submitTournamentScore(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'gameId' => [
                    'required',
                    'integer',
                ],
                'packId' => [
                    'required',
                    'integer',
                ],
                'scores' => [
                    'required',
                    'string',
                ],
                'gameLevelId' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $appKey = $request->string('appKey')->value();

        $missionId = $request->integer('missionId');

        $gameId = $request->integer('gameId');

        $packId = $request->integer('packId');

        $scores = $request->string('scores')->value();

        $gameLevelId = $request->integer('gameLevelId');


        $apiResult = $this->api->submitTournamentScore($version, $accountId, $appKey, $missionId, $gameId, $packId, $scores, $gameLevelId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation submitTournamentVote
     *
     * Submit a vote for a multi-stage album tournament..
     *
     */
    public function submitTournamentVote(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'required',
                    'string',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'gameObjectId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'checkIfDeviceAlreadyVoted' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $appKey = $request->string('appKey')->value();

        $missionId = $request->integer('missionId');

        $gameObjectId = $request->integer('gameObjectId');

        $deviceId = $request->string('deviceId')->value();

        $checkIfDeviceAlreadyVoted = $request->boolean('checkIfDeviceAlreadyVoted');


        $apiResult = $this->api->submitTournamentVote($version, $accountId, $appKey, $missionId, $gameObjectId, $deviceId, $checkIfDeviceAlreadyVoted);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation substituteTournamentPlayer
     *
     * Substitute Tournament Player.
     *
     */
    public function substituteTournamentPlayer(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'packId' => [
                    'required',
                    'integer',
                ],
                'gameLevelId' => [
                    'required',
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');

        $packId = $request->integer('packId');

        $gameLevelId = $request->integer('gameLevelId');


        $apiResult = $this->api->substituteTournamentPlayer($version, $accountId, $missionId, $packId, $gameLevelId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateTournament
     *
     * Update Tournament.
     *
     */
    public function updateTournament(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'missionId' => [
                    'required',
                    'integer',
                ],
                'title' => [
                    'string',
                ],
                'subType' => [
                    'string',
                ],
                'imageAssetId' => [
                    'integer',
                ],
                'secondsBetweenLevels' => [
                    'integer',
                ],
                'secondsForTieBreaker' => [
                    'integer',
                ],
                'secondsBetweenPacks' => [
                    'integer',
                ],
                'maximumLevelLength' => [
                    'integer',
                ],
                'costToPlay' => [
                    'integer',
                ],
                'costToPlayType' => [
                    'string',
                ],
                'minimumToPlay' => [
                    'integer',
                ],
                'startingLimit' => [
                    'integer',
                ],
                'availableLimit' => [
                    'integer',
                ],
                'description' => [
                    'string',
                ],
                'metaData' => [
                    'string',
                ],
                'startDate' => [
                    'integer',
                ],
                'audienceIds' => [
                    'string',
                ],
                'active' => [
                    'boolean',
                ],
                'enableBuyBack' => [
                    'boolean',
                ],
                'offerIds' => [
                    'string',
                ],
                'offerAssetId' => [
                    'integer',
                ],
                'fixedReward' => [
                    'boolean',
                ],
                'splitReward' => [
                ],
                'allocateTickets' => [
                    'boolean',
                ],
                'tournamentData' => [
                    'string',
                ],
                'visibility' => [
                ],
                'preliminaryGroups' => [
                    'integer',
                ],
                'preliminaryGroupAdvancements' => [
                    'string',
                ],
                'enableMultipleEntries' => [
                    'boolean',
                ],
                'enableMultipleVotes' => [
                    'boolean',
                ],
                'featured' => [
                    'boolean',
                ],
                'winnerTag' => [
                    'string',
                ],
                'tieTag' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $missionId = $request->integer('missionId');

        $title = $request->string('title')->value();

        $subType = $request->string('subType')->value();

        $imageAssetId = $request->integer('imageAssetId');

        $secondsBetweenLevels = $request->integer('secondsBetweenLevels');

        $secondsForTieBreaker = $request->integer('secondsForTieBreaker');

        $secondsBetweenPacks = $request->integer('secondsBetweenPacks');

        $maximumLevelLength = $request->integer('maximumLevelLength');

        $costToPlay = $request->integer('costToPlay');

        $costToPlayType = $request->string('costToPlayType')->value();

        $minimumToPlay = $request->integer('minimumToPlay');

        $startingLimit = $request->integer('startingLimit');

        $availableLimit = $request->integer('availableLimit');

        $description = $request->string('description')->value();

        $metaData = $request->string('metaData')->value();

        $startDate = $request->integer('startDate');

        $audienceIds = $request->string('audienceIds')->value();

        $active = $request->boolean('active');

        $enableBuyBack = $request->boolean('enableBuyBack');

        $offerIds = $request->string('offerIds')->value();

        $offerAssetId = $request->integer('offerAssetId');

        $fixedReward = $request->boolean('fixedReward');

        $splitReward = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\UpdateTournamentSplitRewardParameter::class);

        $allocateTickets = $request->boolean('allocateTickets');

        $tournamentData = $request->string('tournamentData')->value();

        $visibility = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateMediaOfferVisibilityParameter::class);

        $preliminaryGroups = $request->integer('preliminaryGroups');

        $preliminaryGroupAdvancements = $request->string('preliminaryGroupAdvancements')->value();

        $enableMultipleEntries = $request->boolean('enableMultipleEntries');

        $enableMultipleVotes = $request->boolean('enableMultipleVotes');

        $featured = $request->boolean('featured');

        $winnerTag = $request->string('winnerTag')->value();

        $tieTag = $request->string('tieTag')->value();


        $apiResult = $this->api->updateTournament($version, $accountId, $missionId, $title, $subType, $imageAssetId, $secondsBetweenLevels, $secondsForTieBreaker, $secondsBetweenPacks, $maximumLevelLength, $costToPlay, $costToPlayType, $minimumToPlay, $startingLimit, $availableLimit, $description, $metaData, $startDate, $audienceIds, $active, $enableBuyBack, $offerIds, $offerAssetId, $fixedReward, $splitReward, $allocateTickets, $tournamentData, $visibility, $preliminaryGroups, $preliminaryGroupAdvancements, $enableMultipleEntries, $enableMultipleVotes, $featured, $winnerTag, $tieTag);

        if ($apiResult instanceof \OpenAPI\Server\Model\TournamentResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
