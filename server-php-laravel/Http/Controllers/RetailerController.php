<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\RetailerApiInterface;

class RetailerController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly RetailerApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation createRetailer
     *
     * Create Retailer.
     *
     */
    public function createRetailer(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'name' => [
                    'required',
                    'string',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'streetAddress' => [
                    'string',
                ],
                'streetAddress2' => [
                    'string',
                ],
                'city' => [
                    'string',
                ],
                'state' => [
                    'string',
                ],
                'postalCode' => [
                    'string',
                ],
                'country' => [
                    'string',
                ],
                'businessPhone' => [
                    'string',
                ],
                'businessPhoneExt' => [
                    'string',
                ],
                'website' => [
                    'string',
                ],
                'email' => [
                    'string',
                ],
                'facebookUrl' => [
                    'string',
                ],
                'twitterUrl' => [
                    'string',
                ],
                'logo' => [
                    'file',
                ],
                'logoAssetId' => [
                    'integer',
                ],
                'picture1' => [
                    'file',
                ],
                'picture1AssetId' => [
                    'integer',
                ],
                'picture2' => [
                    'file',
                ],
                'picture2AssetId' => [
                    'integer',
                ],
                'categoryIds' => [
                    'string',
                ],
                'categoryIdsToAdd' => [
                    'string',
                ],
                'categoryIdsToRemove' => [
                    'string',
                ],
                'filterIds' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'metaData' => [
                    'string',
                ],
                'searchTags' => [
                    'string',
                ],
                'retailerType' => [
                    'string',
                ],
                'visibility' => [
                ],
                'createDefaultLocation' => [
                    'boolean',
                ],
                'responseFormat' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $name = $request->string('name')->value();

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $streetAddress = $request->string('streetAddress')->value();

        $streetAddress2 = $request->string('streetAddress2')->value();

        $city = $request->string('city')->value();

        $state = $request->string('state')->value();

        $postalCode = $request->string('postalCode')->value();

        $country = $request->string('country')->value();

        $businessPhone = $request->string('businessPhone')->value();

        $businessPhoneExt = $request->string('businessPhoneExt')->value();

        $website = $request->string('website')->value();

        $email = $request->string('email')->value();

        $facebookUrl = $request->string('facebookUrl')->value();

        $twitterUrl = $request->string('twitterUrl')->value();

        $logo = $request->file('logo');

        $logoAssetId = $request->integer('logoAssetId');

        $picture1 = $request->file('picture1');

        $picture1AssetId = $request->integer('picture1AssetId');

        $picture2 = $request->file('picture2');

        $picture2AssetId = $request->integer('picture2AssetId');

        $categoryIds = $request->string('categoryIds')->value();

        $categoryIdsToAdd = $request->string('categoryIdsToAdd')->value();

        $categoryIdsToRemove = $request->string('categoryIdsToRemove')->value();

        $filterIds = $request->string('filterIds')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $metaData = $request->string('metaData')->value();

        $searchTags = $request->string('searchTags')->value();

        $retailerType = $request->string('retailerType')->value();

        $visibility = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AddAlbumCollectionVisibilityParameter::class);

        $createDefaultLocation = $request->boolean('createDefaultLocation');

        $responseFormat = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageResponseFormatParameter::class);


        $apiResult = $this->api->createRetailer($version, $name, $deviceId, $accountId, $streetAddress, $streetAddress2, $city, $state, $postalCode, $country, $businessPhone, $businessPhoneExt, $website, $email, $facebookUrl, $twitterUrl, $logo, $logoAssetId, $picture1, $picture1AssetId, $picture2, $picture2AssetId, $categoryIds, $categoryIdsToAdd, $categoryIdsToRemove, $filterIds, $latitude, $longitude, $metaData, $searchTags, $retailerType, $visibility, $createDefaultLocation, $responseFormat);

        if ($apiResult instanceof \OpenAPI\Server\Model\RetailerFullResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteRetailer
     *
     * Delete Retailer.
     *
     */
    public function deleteRetailer(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'retailerId' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $retailerId = $request->integer('retailerId');


        $apiResult = $this->api->deleteRetailer($version, $deviceId, $accountId, $retailerId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getRetailer
     *
     * Get Retailer.
     *
     */
    public function getRetailer(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'retailerId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'includeCounts' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $retailerId = $request->integer('retailerId');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $includeCounts = $request->boolean('includeCounts');


        $apiResult = $this->api->getRetailer($version, $retailerId, $deviceId, $accountId, $includeCounts);

        if ($apiResult instanceof \OpenAPI\Server\Model\RetailerFullResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getRetailers
     *
     * Search Retailers.
     *
     */
    public function getRetailers(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'visibility' => [
                    'required',
                ],
                'sortField' => [
                    'required',
                ],
                'descending' => [
                    'required',
                    'boolean',
                ],
                'start' => [
                    'required',
                    'integer',
                ],
                'limit' => [
                    'required',
                    'integer',
                ],
                'activeOnly' => [
                    'required',
                    'boolean',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'q' => [
                    'string',
                ],
                'keyword' => [
                    'string',
                ],
                'categoryIds' => [
                    'string',
                ],
                'filterIds' => [
                    'string',
                ],
                'i' => [
                    'integer',
                ],
                'l' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $visibility = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AddAlbumCollectionVisibilityParameter::class);

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\GetRetailersSortFieldParameter::class);

        $descending = $request->boolean('descending');

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $activeOnly = $request->boolean('activeOnly');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $q = $request->string('q')->value();

        $keyword = $request->string('keyword')->value();

        $categoryIds = $request->string('categoryIds')->value();

        $filterIds = $request->string('filterIds')->value();

        $i = $request->integer('i');

        $l = $request->integer('l');


        $apiResult = $this->api->getRetailers($version, $visibility, $sortField, $descending, $start, $limit, $activeOnly, $deviceId, $accountId, $q, $keyword, $categoryIds, $filterIds, $i, $l);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation retailerLoginCheck
     *
     * Login Retailer.
     *
     */
    public function retailerLoginCheck(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'username' => [
                    'required',
                    'string',
                ],
                'password' => [
                    'required',
                    'string',
                ],
                'deviceId' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'appKey' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $username = $request->string('username')->value();

        $password = $request->string('password')->value();

        $deviceId = $request->string('deviceId')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $appKey = $request->string('appKey')->value();


        $apiResult = $this->api->retailerLoginCheck($version, $username, $password, $deviceId, $latitude, $longitude, $appKey);

        if ($apiResult instanceof \OpenAPI\Server\Model\AccountLoginResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateRetailer
     *
     * Update Retailer.
     *
     */
    public function updateRetailer(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'retailerId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'name' => [
                    'string',
                ],
                'streetAddress' => [
                    'string',
                ],
                'streetAddress2' => [
                    'string',
                ],
                'city' => [
                    'string',
                ],
                'state' => [
                    'string',
                ],
                'postalCode' => [
                    'string',
                ],
                'country' => [
                    'string',
                ],
                'businessPhone' => [
                    'string',
                ],
                'businessPhoneExt' => [
                    'string',
                ],
                'website' => [
                    'string',
                ],
                'email' => [
                    'string',
                ],
                'facebookUrl' => [
                    'string',
                ],
                'twitterUrl' => [
                    'string',
                ],
                'logo' => [
                    'file',
                ],
                'logoAssetId' => [
                    'integer',
                ],
                'picture1' => [
                    'file',
                ],
                'picture1AssetId' => [
                    'integer',
                ],
                'picture2' => [
                    'file',
                ],
                'picture2AssetId' => [
                    'integer',
                ],
                'categoryIds' => [
                    'string',
                ],
                'filterIds' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'metaData' => [
                    'string',
                ],
                'searchTags' => [
                    'string',
                ],
                'retailerType' => [
                    'string',
                ],
                'visibility' => [
                ],
                'active' => [
                    'boolean',
                ],
                'responseFormat' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $retailerId = $request->integer('retailerId');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $name = $request->string('name')->value();

        $streetAddress = $request->string('streetAddress')->value();

        $streetAddress2 = $request->string('streetAddress2')->value();

        $city = $request->string('city')->value();

        $state = $request->string('state')->value();

        $postalCode = $request->string('postalCode')->value();

        $country = $request->string('country')->value();

        $businessPhone = $request->string('businessPhone')->value();

        $businessPhoneExt = $request->string('businessPhoneExt')->value();

        $website = $request->string('website')->value();

        $email = $request->string('email')->value();

        $facebookUrl = $request->string('facebookUrl')->value();

        $twitterUrl = $request->string('twitterUrl')->value();

        $logo = $request->file('logo');

        $logoAssetId = $request->integer('logoAssetId');

        $picture1 = $request->file('picture1');

        $picture1AssetId = $request->integer('picture1AssetId');

        $picture2 = $request->file('picture2');

        $picture2AssetId = $request->integer('picture2AssetId');

        $categoryIds = $request->string('categoryIds')->value();

        $filterIds = $request->string('filterIds')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $metaData = $request->string('metaData')->value();

        $searchTags = $request->string('searchTags')->value();

        $retailerType = $request->string('retailerType')->value();

        $visibility = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AddAlbumCollectionVisibilityParameter::class);

        $active = $request->boolean('active');

        $responseFormat = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageResponseFormatParameter::class);


        $apiResult = $this->api->updateRetailer($version, $retailerId, $deviceId, $accountId, $name, $streetAddress, $streetAddress2, $city, $state, $postalCode, $country, $businessPhone, $businessPhoneExt, $website, $email, $facebookUrl, $twitterUrl, $logo, $logoAssetId, $picture1, $picture1AssetId, $picture2, $picture2AssetId, $categoryIds, $filterIds, $latitude, $longitude, $metaData, $searchTags, $retailerType, $visibility, $active, $responseFormat);

        if ($apiResult instanceof \OpenAPI\Server\Model\RetailerFullResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
