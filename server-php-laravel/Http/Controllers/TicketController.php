<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\TicketApiInterface;

class TicketController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly TicketApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation getTicketCount
     *
     * Get Ticket Count.
     *
     */
    public function getTicketCount(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'gameType' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'ticketType' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $gameType = $request->string('gameType')->value();

        $appKey = $request->string('appKey')->value();

        $ticketType = $request->string('ticketType')->value();


        $apiResult = $this->api->getTicketCount($deviceId, $accountId, $gameType, $appKey, $ticketType);

        if ($apiResult instanceof \OpenAPI\Server\Model\CountResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getTicketList
     *
     * Get Ticket List.
     *
     */
    public function getTicketList(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'ticketObjectType' => [
                    'string',
                ],
                'actionType' => [
                    'string',
                ],
                'ticketIds' => [
                    'string',
                ],
                'objectIds' => [
                    'string',
                ],
                'receiptTokens' => [
                    'string',
                ],
                'gameType' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $ticketObjectType = $request->string('ticketObjectType')->value();

        $actionType = $request->string('actionType')->value();

        $ticketIds = $request->string('ticketIds')->value();

        $objectIds = $request->string('objectIds')->value();

        $receiptTokens = $request->string('receiptTokens')->value();

        $gameType = $request->string('gameType')->value();

        $appKey = $request->string('appKey')->value();


        $apiResult = $this->api->getTicketList($deviceId, $accountId, $ticketObjectType, $actionType, $ticketIds, $objectIds, $receiptTokens, $gameType, $appKey);

        if ($apiResult instanceof \OpenAPI\Server\Model\TicketListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation giftPurchase
     *
     * Gift Tickets.
     *
     */
    public function giftPurchase(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'receiverAccountId' => [
                    'required',
                    'integer',
                ],
                'ticketId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'assetId' => [
                    'integer',
                ],
                'customMessage' => [
                    'string',
                ],
                'gameType' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $receiverAccountId = $request->integer('receiverAccountId');

        $ticketId = $request->integer('ticketId');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $assetId = $request->integer('assetId');

        $customMessage = $request->string('customMessage')->value();

        $gameType = $request->string('gameType')->value();

        $appKey = $request->string('appKey')->value();


        $apiResult = $this->api->giftPurchase($receiverAccountId, $ticketId, $deviceId, $accountId, $assetId, $customMessage, $gameType, $appKey);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation saveTicket
     *
     * Save Ticket.
     *
     */
    public function saveTicket(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'actionType' => [
                    'required',
                    'string',
                ],
                'ticketObjectType' => [
                    'required',
                    'string',
                ],
                'returnNulls' => [
                    'boolean',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'gameType' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'objectId' => [
                    'integer',
                ],
                'purchaseCode' => [
                    'string',
                ],
                'receiptToken' => [
                    'string',
                ],
                'receiptData' => [
                    'string',
                ],
                'count' => [
                    'integer',
                ],
                'ticketType' => [
                    'string',
                ],
                'purchaseProvider' => [
                    'string',
                ],
                'purchaseType' => [
                    'string',
                ],
                'returnProfileResponse' => [
                    'boolean',
                ],
                'includeProfileResponse' => [
                    'boolean',
                ],
                'appVersion' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $actionType = $request->string('actionType')->value();

        $ticketObjectType = $request->string('ticketObjectType')->value();

        $returnNulls = $request->boolean('returnNulls');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $gameType = $request->string('gameType')->value();

        $appKey = $request->string('appKey')->value();

        $objectId = $request->integer('objectId');

        $purchaseCode = $request->string('purchaseCode')->value();

        $receiptToken = $request->string('receiptToken')->value();

        $receiptData = $request->string('receiptData')->value();

        $count = $request->integer('count');

        $ticketType = $request->string('ticketType')->value();

        $purchaseProvider = $request->string('purchaseProvider')->value();

        $purchaseType = $request->string('purchaseType')->value();

        $returnProfileResponse = $request->boolean('returnProfileResponse');

        $includeProfileResponse = $request->boolean('includeProfileResponse');

        $appVersion = $request->string('appVersion')->value();


        $apiResult = $this->api->saveTicket($actionType, $ticketObjectType, $returnNulls, $deviceId, $accountId, $gameType, $appKey, $objectId, $purchaseCode, $receiptToken, $receiptData, $count, $ticketType, $purchaseProvider, $purchaseType, $returnProfileResponse, $includeProfileResponse, $appVersion);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProfileResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation saveTicketViaFileUpload
     *
     * Save Ticket with Reciept.
     *
     */
    public function saveTicketViaFileUpload(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'actionType' => [
                    'required',
                    'string',
                ],
                'ticketObjectType' => [
                    'required',
                    'string',
                ],
                'receiptData' => [
                    'file',
                    'required',
                ],
                'returnNulls' => [
                    'boolean',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'gameType' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'objectId' => [
                    'integer',
                ],
                'purchaseCode' => [
                    'string',
                ],
                'receiptToken' => [
                    'string',
                ],
                'count' => [
                    'integer',
                ],
                'ticketType' => [
                    'string',
                ],
                'purchaseProvider' => [
                    'string',
                ],
                'purchaseType' => [
                    'string',
                ],
                'returnProfileResponse' => [
                    'boolean',
                ],
                'includeProfileResponse' => [
                    'boolean',
                ],
                'appVersion' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $actionType = $request->string('actionType')->value();

        $ticketObjectType = $request->string('ticketObjectType')->value();

        $receiptData = $request->file('receiptData');

        $returnNulls = $request->boolean('returnNulls');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $gameType = $request->string('gameType')->value();

        $appKey = $request->string('appKey')->value();

        $objectId = $request->integer('objectId');

        $purchaseCode = $request->string('purchaseCode')->value();

        $receiptToken = $request->string('receiptToken')->value();

        $count = $request->integer('count');

        $ticketType = $request->string('ticketType')->value();

        $purchaseProvider = $request->string('purchaseProvider')->value();

        $purchaseType = $request->string('purchaseType')->value();

        $returnProfileResponse = $request->boolean('returnProfileResponse');

        $includeProfileResponse = $request->boolean('includeProfileResponse');

        $appVersion = $request->string('appVersion')->value();


        $apiResult = $this->api->saveTicketViaFileUpload($actionType, $ticketObjectType, $receiptData, $returnNulls, $deviceId, $accountId, $gameType, $appKey, $objectId, $purchaseCode, $receiptToken, $count, $ticketType, $purchaseProvider, $purchaseType, $returnProfileResponse, $includeProfileResponse, $appVersion);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProfileResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation ticketOffers
     *
     * Get Ticket Offers.
     *
     */
    public function ticketOffers(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $apiResult = $this->api->ticketOffers();

        if ($apiResult instanceof \OpenAPI\Server\Model\TicketOfferResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
