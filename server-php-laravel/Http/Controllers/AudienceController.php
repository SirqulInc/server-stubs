<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\AudienceApiInterface;

class AudienceController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly AudienceApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation createAudience
     *
     * Create Audience.
     *
     */
    public function createAudience(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'name' => [
                    'required',
                    'string',
                ],
                'description' => [
                    'string',
                ],
                'searchTags' => [
                    'string',
                ],
                'gender' => [
                    'string',
                ],
                'ageGroups' => [
                    'string',
                ],
                'categoryIds' => [
                    'string',
                ],
                'applicationIds' => [
                    'string',
                ],
                'gameExperienceLevel' => [
                    'string',
                ],
                'devices' => [
                    'string',
                ],
                'deviceIds' => [
                    'string',
                ],
                'deviceVersions' => [
                    'string',
                ],
                'locations' => [
                    'string',
                ],
                'radius' => [
                    'string',
                ],
                'startTimeOffset' => [
                    'integer',
                ],
                'endTimeOffset' => [
                    'integer',
                ],
                'sendSuggestion' => [
                    'boolean',
                ],
                'associateDescription' => [
                    'string',
                ],
                'associateType' => [
                    'string',
                ],
                'associateId' => [
                    'integer',
                ],
                'groupingId' => [
                    'string',
                ],
                'metaData' => [
                    'string',
                ],
                'visibility' => [
                    'string',
                ],
                'audienceType' => [
                    'string',
                ],
                'useOrder' => [
                    'boolean',
                ],
                'cohortRegionsData' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'trilaterationTypes' => [
                    'string',
                ],
                'uniqueName' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $name = $request->string('name')->value();

        $description = $request->string('description')->value();

        $searchTags = $request->string('searchTags')->value();

        $gender = $request->string('gender')->value();

        $ageGroups = $request->string('ageGroups')->value();

        $categoryIds = $request->string('categoryIds')->value();

        $applicationIds = $request->string('applicationIds')->value();

        $gameExperienceLevel = $request->string('gameExperienceLevel')->value();

        $devices = $request->string('devices')->value();

        $deviceIds = $request->string('deviceIds')->value();

        $deviceVersions = $request->string('deviceVersions')->value();

        $locations = $request->string('locations')->value();

        $radius = $request->string('radius')->value();

        $startTimeOffset = $request->integer('startTimeOffset');

        $endTimeOffset = $request->integer('endTimeOffset');

        $sendSuggestion = $request->boolean('sendSuggestion');

        $associateDescription = $request->string('associateDescription')->value();

        $associateType = $request->string('associateType')->value();

        $associateId = $request->integer('associateId');

        $groupingId = $request->string('groupingId')->value();

        $metaData = $request->string('metaData')->value();

        $visibility = $request->string('visibility')->value();

        $audienceType = $request->string('audienceType')->value();

        $useOrder = $request->boolean('useOrder');

        $cohortRegionsData = $request->string('cohortRegionsData')->value();

        $appKey = $request->string('appKey')->value();

        $trilaterationTypes = $request->string('trilaterationTypes')->value();

        $uniqueName = $request->boolean('uniqueName');


        $apiResult = $this->api->createAudience($version, $accountId, $name, $description, $searchTags, $gender, $ageGroups, $categoryIds, $applicationIds, $gameExperienceLevel, $devices, $deviceIds, $deviceVersions, $locations, $radius, $startTimeOffset, $endTimeOffset, $sendSuggestion, $associateDescription, $associateType, $associateId, $groupingId, $metaData, $visibility, $audienceType, $useOrder, $cohortRegionsData, $appKey, $trilaterationTypes, $uniqueName);

        if ($apiResult instanceof \OpenAPI\Server\Model\AudienceResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteAudience
     *
     * Delete Audience.
     *
     */
    public function deleteAudience(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'audienceId' => [
                    'required',
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $audienceId = $request->integer('audienceId');


        $apiResult = $this->api->deleteAudience($version, $accountId, $audienceId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getAgeGroups
     *
     * Get Age Groups.
     *
     */
    public function getAgeGroups(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->getAgeGroups($version);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getAudience
     *
     * Get Audience.
     *
     */
    public function getAudience(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'audienceId' => [
                    'required',
                    'integer',
                ],
                'appKey' => [
                    'string',
                ],
                'returnAccountCount' => [
                    'boolean',
                ],
                'returnAlbumCount' => [
                    'boolean',
                ],
                'albumTypesForCount' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $audienceId = $request->integer('audienceId');

        $appKey = $request->string('appKey')->value();

        $returnAccountCount = $request->boolean('returnAccountCount');

        $returnAlbumCount = $request->boolean('returnAlbumCount');

        $albumTypesForCount = $request->string('albumTypesForCount')->value();


        $apiResult = $this->api->getAudience($version, $accountId, $audienceId, $appKey, $returnAccountCount, $returnAlbumCount, $albumTypesForCount);

        if ($apiResult instanceof \OpenAPI\Server\Model\AudienceResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getAudienceList
     *
     * Search Audiences.
     *
     */
    public function getAudienceList(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'integer',
                ],
                'albumIds' => [
                    'string',
                ],
                'keyword' => [
                    'string',
                ],
                'keywordFields' => [
                    'string',
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'sendSuggestion' => [
                    'boolean',
                ],
                'activeOnly' => [
                    'boolean',
                ],
                'groupByGroupingId' => [
                    'boolean',
                ],
                'appKey' => [
                    'string',
                ],
                'returnGlobal' => [
                    'boolean',
                ],
                'exactKeyword' => [
                    'boolean',
                ],
                'audienceType' => [
                    'string',
                ],
                'audienceTypes' => [
                    'string',
                ],
                'returnAccountCount' => [
                    'boolean',
                ],
                'returnAlbumCount' => [
                    'boolean',
                ],
                'albumTypesForCount' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $albumIds = $request->string('albumIds')->value();

        $keyword = $request->string('keyword')->value();

        $keywordFields = $request->string('keywordFields')->value();

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\GetAudienceListSortFieldParameter::class);

        $descending = $request->boolean('descending');

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $sendSuggestion = $request->boolean('sendSuggestion');

        $activeOnly = $request->boolean('activeOnly');

        $groupByGroupingId = $request->boolean('groupByGroupingId');

        $appKey = $request->string('appKey')->value();

        $returnGlobal = $request->boolean('returnGlobal');

        $exactKeyword = $request->boolean('exactKeyword');

        $audienceType = $request->string('audienceType')->value();

        $audienceTypes = $request->string('audienceTypes')->value();

        $returnAccountCount = $request->boolean('returnAccountCount');

        $returnAlbumCount = $request->boolean('returnAlbumCount');

        $albumTypesForCount = $request->string('albumTypesForCount')->value();


        $apiResult = $this->api->getAudienceList($version, $accountId, $albumIds, $keyword, $keywordFields, $sortField, $descending, $start, $limit, $sendSuggestion, $activeOnly, $groupByGroupingId, $appKey, $returnGlobal, $exactKeyword, $audienceType, $audienceTypes, $returnAccountCount, $returnAlbumCount, $albumTypesForCount);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getDevices
     *
     * Get Devices.
     *
     */
    public function getDevices(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'includeInactive' => [
                    'required',
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $includeInactive = $request->boolean('includeInactive');


        $apiResult = $this->api->getDevices($version, $includeInactive);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getExperiences
     *
     * Get Experiences.
     *
     */
    public function getExperiences(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->getExperiences($version);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getGroupedAudiences
     *
     * Get GroupedAudiences.
     *
     */
    public function getGroupedAudiences(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'audienceGroupingId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $audienceGroupingId = $request->string('audienceGroupingId')->value();


        $apiResult = $this->api->getGroupedAudiences($version, $accountId, $audienceGroupingId);

        if ($apiResult instanceof \OpenAPI\Server\Model\AudienceResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listByAccount
     *
     * List Suggestions by Audience.
     *
     */
    public function listByAccount(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'limit' => [
                    'required',
                    'integer',
                ],
                'suggestionType' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $limit = $request->integer('limit');

        $suggestionType = $request->string('suggestionType')->value();


        $apiResult = $this->api->listByAccount($version, $accountId, $limit, $suggestionType);

        if ($apiResult instanceof \OpenAPI\Server\Model\OfferListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listByAudience
     *
     * List Offers by Audience.
     *
     */
    public function listByAudience(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'limit' => [
                    'required',
                    'integer',
                ],
                'gender' => [
                    'string',
                ],
                'age' => [
                    'integer',
                ],
                'categoryIds' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $gender = $request->string('gender')->value();

        $age = $request->integer('age');

        $categoryIds = $request->string('categoryIds')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');


        $apiResult = $this->api->listByAudience($version, $limit, $gender, $age, $categoryIds, $latitude, $longitude);

        if ($apiResult instanceof \OpenAPI\Server\Model\OfferListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listLastestByAccount
     *
     * List Sent Suggestions.
     *
     */
    public function listLastestByAccount(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'timeframe' => [
                    'required',
                    'integer',
                ],
                'suggestionType' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $timeframe = $request->integer('timeframe');

        $suggestionType = $request->string('suggestionType')->value();


        $apiResult = $this->api->listLastestByAccount($version, $accountId, $timeframe, $suggestionType);

        if ($apiResult instanceof \OpenAPI\Server\Model\OfferListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation sendByAccount
     *
     * Send Suggestions.
     *
     */
    public function sendByAccount(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'latitude' => [
                    'required',
                ],
                'longitude' => [
                    'required',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');


        $apiResult = $this->api->sendByAccount($version, $accountId, $latitude, $longitude);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateAudience
     *
     * Update Audience.
     *
     */
    public function updateAudience(Request $request, float $version): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'version' => $version,
                ],
                $request->all(),
            ),
            [
                'version' => [
                    'required',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
                'audienceId' => [
                    'required',
                    'integer',
                ],
                'name' => [
                    'string',
                ],
                'description' => [
                    'string',
                ],
                'searchTags' => [
                    'string',
                ],
                'gender' => [
                    'string',
                ],
                'ageGroups' => [
                    'string',
                ],
                'categoryIds' => [
                    'string',
                ],
                'applicationIds' => [
                    'string',
                ],
                'gameExperienceLevel' => [
                    'string',
                ],
                'devices' => [
                    'string',
                ],
                'deviceIds' => [
                    'string',
                ],
                'deviceVersions' => [
                    'string',
                ],
                'locations' => [
                    'string',
                ],
                'radius' => [
                    'string',
                ],
                'active' => [
                    'boolean',
                ],
                'sendSuggestion' => [
                    'boolean',
                ],
                'startTimeOffset' => [
                    'integer',
                ],
                'endTimeOffset' => [
                    'integer',
                ],
                'associateDescription' => [
                    'string',
                ],
                'associateType' => [
                    'string',
                ],
                'associateId' => [
                    'integer',
                ],
                'groupingId' => [
                    'string',
                ],
                'metaData' => [
                    'string',
                ],
                'visibility' => [
                    'string',
                ],
                'audienceType' => [
                    'string',
                ],
                'useOrder' => [
                    'boolean',
                ],
                'cohortRegionsData' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'trilaterationTypes' => [
                    'string',
                ],
                'uniqueName' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $accountId = $request->integer('accountId');

        $audienceId = $request->integer('audienceId');

        $name = $request->string('name')->value();

        $description = $request->string('description')->value();

        $searchTags = $request->string('searchTags')->value();

        $gender = $request->string('gender')->value();

        $ageGroups = $request->string('ageGroups')->value();

        $categoryIds = $request->string('categoryIds')->value();

        $applicationIds = $request->string('applicationIds')->value();

        $gameExperienceLevel = $request->string('gameExperienceLevel')->value();

        $devices = $request->string('devices')->value();

        $deviceIds = $request->string('deviceIds')->value();

        $deviceVersions = $request->string('deviceVersions')->value();

        $locations = $request->string('locations')->value();

        $radius = $request->string('radius')->value();

        $active = $request->boolean('active');

        $sendSuggestion = $request->boolean('sendSuggestion');

        $startTimeOffset = $request->integer('startTimeOffset');

        $endTimeOffset = $request->integer('endTimeOffset');

        $associateDescription = $request->string('associateDescription')->value();

        $associateType = $request->string('associateType')->value();

        $associateId = $request->integer('associateId');

        $groupingId = $request->string('groupingId')->value();

        $metaData = $request->string('metaData')->value();

        $visibility = $request->string('visibility')->value();

        $audienceType = $request->string('audienceType')->value();

        $useOrder = $request->boolean('useOrder');

        $cohortRegionsData = $request->string('cohortRegionsData')->value();

        $appKey = $request->string('appKey')->value();

        $trilaterationTypes = $request->string('trilaterationTypes')->value();

        $uniqueName = $request->boolean('uniqueName');


        $apiResult = $this->api->updateAudience($version, $accountId, $audienceId, $name, $description, $searchTags, $gender, $ageGroups, $categoryIds, $applicationIds, $gameExperienceLevel, $devices, $deviceIds, $deviceVersions, $locations, $radius, $active, $sendSuggestion, $startTimeOffset, $endTimeOffset, $associateDescription, $associateType, $associateId, $groupingId, $metaData, $visibility, $audienceType, $useOrder, $cohortRegionsData, $appKey, $trilaterationTypes, $uniqueName);

        if ($apiResult instanceof \OpenAPI\Server\Model\AudienceResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
