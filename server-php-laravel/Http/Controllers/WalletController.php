<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\WalletApiInterface;

class WalletController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly WalletApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation createOfferTransaction
     *
     * Create Wallet Offers.
     *
     */
    public function createOfferTransaction(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'offerId' => [
                    'integer',
                ],
                'offerLocationId' => [
                    'integer',
                ],
                'offerCart' => [
                    'string',
                ],
                'promoCode' => [
                    'string',
                ],
                'currencyType' => [
                    'string',
                ],
                'usePoints' => [
                    'boolean',
                ],
                'metaData' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
                'status' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $offerId = $request->integer('offerId');

        $offerLocationId = $request->integer('offerLocationId');

        $offerCart = $request->string('offerCart')->value();

        $promoCode = $request->string('promoCode')->value();

        $currencyType = $request->string('currencyType')->value();

        $usePoints = $request->boolean('usePoints');

        $metaData = $request->string('metaData')->value();

        $appKey = $request->string('appKey')->value();

        $status = $request->integer('status');


        $apiResult = $this->api->createOfferTransaction($deviceId, $accountId, $offerId, $offerLocationId, $offerCart, $promoCode, $currencyType, $usePoints, $metaData, $appKey, $status);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteOfferTransaction
     *
     * Delete Wallet Offer.
     *
     */
    public function deleteOfferTransaction(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'transactionId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $transactionId = $request->integer('transactionId');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');


        $apiResult = $this->api->deleteOfferTransaction($transactionId, $deviceId, $accountId);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getOfferTransaction
     *
     * Get Wallet Offer.
     *
     */
    public function getOfferTransaction(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'transactionId' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'includeMission' => [
                    'boolean',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'returnFullResponse' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $transactionId = $request->integer('transactionId');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $includeMission = $request->boolean('includeMission');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $returnFullResponse = $request->boolean('returnFullResponse');


        $apiResult = $this->api->getOfferTransaction($transactionId, $deviceId, $accountId, $includeMission, $latitude, $longitude, $returnFullResponse);

        if ($apiResult instanceof \OpenAPI\Server\Model\OfferTransactionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation previewOfferTransaction
     *
     * Preview Wallet Offers.
     *
     */
    public function previewOfferTransaction(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'offerId' => [
                    'integer',
                ],
                'offerLocationId' => [
                    'integer',
                ],
                'offerCart' => [
                    'string',
                ],
                'promoCode' => [
                    'string',
                ],
                'currencyType' => [
                    'string',
                ],
                'usePoints' => [
                    'boolean',
                ],
                'metaData' => [
                    'string',
                ],
                'appKey' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $offerId = $request->integer('offerId');

        $offerLocationId = $request->integer('offerLocationId');

        $offerCart = $request->string('offerCart')->value();

        $promoCode = $request->string('promoCode')->value();

        $currencyType = $request->string('currencyType')->value();

        $usePoints = $request->boolean('usePoints');

        $metaData = $request->string('metaData')->value();

        $appKey = $request->string('appKey')->value();


        $apiResult = $this->api->previewOfferTransaction($deviceId, $accountId, $offerId, $offerLocationId, $offerCart, $promoCode, $currencyType, $usePoints, $metaData, $appKey);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation searchOfferTransactions
     *
     * Search Wallet Offers.
     *
     */
    public function searchOfferTransactions(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'keyword' => [
                    'string',
                ],
                'retailerId' => [
                    'integer',
                ],
                'retailerIds' => [
                    'string',
                ],
                'retailerLocationId' => [
                    'integer',
                ],
                'retailerLocationIds' => [
                    'string',
                ],
                'excludeRetailerLocationIds' => [
                    'string',
                ],
                'offerId' => [
                    'integer',
                ],
                'offerIds' => [
                    'string',
                ],
                'offerLocationId' => [
                    'integer',
                ],
                'offerLocationIds' => [
                    'string',
                ],
                'offerType' => [
                ],
                'offerTypes' => [
                    'string',
                ],
                'specialOfferType' => [
                    'string',
                ],
                'specialOfferTypes' => [
                    'string',
                ],
                'categoryIds' => [
                    'string',
                ],
                'filterIds' => [
                    'string',
                ],
                'offerAudienceIds' => [
                    'string',
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'start' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'redeemableStartDate' => [
                    'integer',
                ],
                'redeemableEndDate' => [
                    'integer',
                ],
                'filterByParentOffer' => [
                    'boolean',
                ],
                'startedSince' => [
                    'integer',
                ],
                'startedBefore' => [
                    'integer',
                ],
                'endedSince' => [
                    'integer',
                ],
                'endedBefore' => [
                    'integer',
                ],
                'redeemed' => [
                    'boolean',
                ],
                'statuses' => [
                    'string',
                ],
                'reservationsOnly' => [
                    'boolean',
                ],
                'activeOnly' => [
                    'boolean',
                ],
                'returnFullResponse' => [
                    'boolean',
                ],
                'recurringStartedSince' => [
                    'integer',
                ],
                'recurringStartedBefore' => [
                    'integer',
                ],
                'recurringExpirationSince' => [
                    'integer',
                ],
                'recurringExpirationBefore' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $keyword = $request->string('keyword')->value();

        $retailerId = $request->integer('retailerId');

        $retailerIds = $request->string('retailerIds')->value();

        $retailerLocationId = $request->integer('retailerLocationId');

        $retailerLocationIds = $request->string('retailerLocationIds')->value();

        $excludeRetailerLocationIds = $request->string('excludeRetailerLocationIds')->value();

        $offerId = $request->integer('offerId');

        $offerIds = $request->string('offerIds')->value();

        $offerLocationId = $request->integer('offerLocationId');

        $offerLocationIds = $request->string('offerLocationIds')->value();

        $offerType = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateOfferOfferTypeParameter::class);

        $offerTypes = $request->string('offerTypes')->value();

        $specialOfferType = $request->string('specialOfferType')->value();

        $specialOfferTypes = $request->string('specialOfferTypes')->value();

        $categoryIds = $request->string('categoryIds')->value();

        $filterIds = $request->string('filterIds')->value();

        $offerAudienceIds = $request->string('offerAudienceIds')->value();

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\SearchOfferTransactionsSortFieldParameter::class);

        $descending = $request->boolean('descending');

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $redeemableStartDate = $request->integer('redeemableStartDate');

        $redeemableEndDate = $request->integer('redeemableEndDate');

        $filterByParentOffer = $request->boolean('filterByParentOffer');

        $startedSince = $request->integer('startedSince');

        $startedBefore = $request->integer('startedBefore');

        $endedSince = $request->integer('endedSince');

        $endedBefore = $request->integer('endedBefore');

        $redeemed = $request->boolean('redeemed');

        $statuses = $request->string('statuses')->value();

        $reservationsOnly = $request->boolean('reservationsOnly');

        $activeOnly = $request->boolean('activeOnly');

        $returnFullResponse = $request->boolean('returnFullResponse');

        $recurringStartedSince = $request->integer('recurringStartedSince');

        $recurringStartedBefore = $request->integer('recurringStartedBefore');

        $recurringExpirationSince = $request->integer('recurringExpirationSince');

        $recurringExpirationBefore = $request->integer('recurringExpirationBefore');


        $apiResult = $this->api->searchOfferTransactions($deviceId, $accountId, $keyword, $retailerId, $retailerIds, $retailerLocationId, $retailerLocationIds, $excludeRetailerLocationIds, $offerId, $offerIds, $offerLocationId, $offerLocationIds, $offerType, $offerTypes, $specialOfferType, $specialOfferTypes, $categoryIds, $filterIds, $offerAudienceIds, $sortField, $descending, $start, $limit, $latitude, $longitude, $redeemableStartDate, $redeemableEndDate, $filterByParentOffer, $startedSince, $startedBefore, $endedSince, $endedBefore, $redeemed, $statuses, $reservationsOnly, $activeOnly, $returnFullResponse, $recurringStartedSince, $recurringStartedBefore, $recurringExpirationSince, $recurringExpirationBefore);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateOfferTransaction
     *
     * Update Wallet Offer.
     *
     */
    public function updateOfferTransaction(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'transactionId' => [
                    'required',
                    'integer',
                ],
                'status' => [
                    'required',
                    'integer',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'offerLocationId' => [
                    'integer',
                ],
                'currencyType' => [
                    'string',
                ],
                'usePoints' => [
                    'boolean',
                ],
                'appKey' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'metaData' => [
                    'string',
                ],
                'returnFullResponse' => [
                    'boolean',
                ],
                'exceptionMembershipOfferIds' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $transactionId = $request->integer('transactionId');

        $status = $request->integer('status');

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $offerLocationId = $request->integer('offerLocationId');

        $currencyType = $request->string('currencyType')->value();

        $usePoints = $request->boolean('usePoints');

        $appKey = $request->string('appKey')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $metaData = $request->string('metaData')->value();

        $returnFullResponse = $request->boolean('returnFullResponse');

        $exceptionMembershipOfferIds = $request->string('exceptionMembershipOfferIds')->value();


        $apiResult = $this->api->updateOfferTransaction($transactionId, $status, $deviceId, $accountId, $offerLocationId, $currencyType, $usePoints, $appKey, $latitude, $longitude, $metaData, $returnFullResponse, $exceptionMembershipOfferIds);

        if ($apiResult instanceof \OpenAPI\Server\Model\OfferTransactionResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
