<?php declare(strict_types=1);

/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\AnalyticsApiInterface;

class AnalyticsController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly AnalyticsApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation activities
     *
     * Get User Activity.
     *
     */
    public function activities(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'start' => [
                    'required',
                    'integer',
                ],
                'limit' => [
                    'required',
                    'integer',
                ],
                'accountId' => [
                    'required',
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $start = $request->integer('start');

        $limit = $request->integer('limit');

        $accountId = $request->integer('accountId');


        $apiResult = $this->api->activities($start, $limit, $accountId);

        if (is_array($apiResult)) {
            $serialized = array_map(fn ($item) => $this->serde->serialize($item, format: 'array'), $apiResult);
            return response()->json($serialized, 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation aggregatedFilteredUsage
     *
     * Get Aggregated Filtered Usage.
     *
     */
    public function aggregatedFilteredUsage(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'applicationId' => [
                    'integer',
                ],
                'appKey' => [
                    'string',
                ],
                'startDate' => [
                    'integer',
                ],
                'endDate' => [
                    'integer',
                ],
                'deviceType' => [
                    'string',
                ],
                'device' => [
                    'string',
                ],
                'deviceOS' => [
                    'string',
                ],
                'gender' => [
                    'string',
                ],
                'ageGroup' => [
                    'string',
                ],
                'country' => [
                    'string',
                ],
                'state' => [
                    'string',
                ],
                'city' => [
                    'string',
                ],
                'zip' => [
                    'string',
                ],
                'model' => [
                    'string',
                ],
                'tag' => [
                    'string',
                ],
                'userAccountId' => [
                    'integer',
                ],
                'userAccountDisplay' => [
                    'string',
                ],
                'userAccountUsername' => [
                    'string',
                ],
                'groupByRoot' => [
                ],
                'groupBy' => [
                ],
                'distinctCount' => [
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'hideUnknown' => [
                    'boolean',
                ],
                'responseFormat' => [
                ],
                'l' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $applicationId = $request->integer('applicationId');

        $appKey = $request->string('appKey')->value();

        $startDate = $request->integer('startDate');

        $endDate = $request->integer('endDate');

        $deviceType = $request->string('deviceType')->value();

        $device = $request->string('device')->value();

        $deviceOS = $request->string('deviceOS')->value();

        $gender = $request->string('gender')->value();

        $ageGroup = $request->string('ageGroup')->value();

        $country = $request->string('country')->value();

        $state = $request->string('state')->value();

        $city = $request->string('city')->value();

        $zip = $request->string('zip')->value();

        $model = $request->string('model')->value();

        $tag = $request->string('tag')->value();

        $userAccountId = $request->integer('userAccountId');

        $userAccountDisplay = $request->string('userAccountDisplay')->value();

        $userAccountUsername = $request->string('userAccountUsername')->value();

        $groupByRoot = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $groupBy = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $distinctCount = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $descending = $request->boolean('descending');

        $hideUnknown = $request->boolean('hideUnknown');

        $responseFormat = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageResponseFormatParameter::class);

        $l = $request->integer('l');

        $limit = $request->integer('limit');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');


        $apiResult = $this->api->aggregatedFilteredUsage($deviceId, $accountId, $applicationId, $appKey, $startDate, $endDate, $deviceType, $device, $deviceOS, $gender, $ageGroup, $country, $state, $city, $zip, $model, $tag, $userAccountId, $userAccountDisplay, $userAccountUsername, $groupByRoot, $groupBy, $distinctCount, $sortField, $descending, $hideUnknown, $responseFormat, $l, $limit, $latitude, $longitude);

        if ($apiResult instanceof \OpenAPI\Server\Model\ChartData) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation filteredUsage
     *
     * Get Filtered Usage.
     *
     */
    public function filteredUsage(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'applicationId' => [
                    'integer',
                ],
                'appKey' => [
                    'string',
                ],
                'startDate' => [
                    'integer',
                ],
                'endDate' => [
                    'integer',
                ],
                'deviceType' => [
                    'string',
                ],
                'device' => [
                    'string',
                ],
                'deviceOS' => [
                    'string',
                ],
                'gender' => [
                    'string',
                ],
                'ageGroup' => [
                    'string',
                ],
                'country' => [
                    'string',
                ],
                'state' => [
                    'string',
                ],
                'city' => [
                    'string',
                ],
                'zip' => [
                    'string',
                ],
                'model' => [
                    'string',
                ],
                'tag' => [
                    'string',
                ],
                'userAccountId' => [
                    'integer',
                ],
                'userAccountDisplay' => [
                    'string',
                ],
                'userAccountUsername' => [
                    'string',
                ],
                'customId' => [
                    'integer',
                ],
                'customType' => [
                    'string',
                ],
                'customValue' => [
                ],
                'customValue2' => [
                ],
                'customLong' => [
                    'integer',
                ],
                'customLong2' => [
                    'integer',
                ],
                'customMessage' => [
                    'string',
                ],
                'customMessage2' => [
                    'string',
                ],
                'groupBy' => [
                ],
                'distinctCount' => [
                ],
                'sumColumn' => [
                ],
                'sortField' => [
                ],
                'descending' => [
                    'boolean',
                ],
                'hideUnknown' => [
                    'boolean',
                ],
                'responseFormat' => [
                ],
                'l' => [
                    'integer',
                ],
                'limit' => [
                    'integer',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $applicationId = $request->integer('applicationId');

        $appKey = $request->string('appKey')->value();

        $startDate = $request->integer('startDate');

        $endDate = $request->integer('endDate');

        $deviceType = $request->string('deviceType')->value();

        $device = $request->string('device')->value();

        $deviceOS = $request->string('deviceOS')->value();

        $gender = $request->string('gender')->value();

        $ageGroup = $request->string('ageGroup')->value();

        $country = $request->string('country')->value();

        $state = $request->string('state')->value();

        $city = $request->string('city')->value();

        $zip = $request->string('zip')->value();

        $model = $request->string('model')->value();

        $tag = $request->string('tag')->value();

        $userAccountId = $request->integer('userAccountId');

        $userAccountDisplay = $request->string('userAccountDisplay')->value();

        $userAccountUsername = $request->string('userAccountUsername')->value();

        $customId = $request->integer('customId');

        $customType = $request->string('customType')->value();

        $customValue = $request->float('customValue');

        $customValue2 = $request->float('customValue2');

        $customLong = $request->integer('customLong');

        $customLong2 = $request->integer('customLong2');

        $customMessage = $request->string('customMessage')->value();

        $customMessage2 = $request->string('customMessage2')->value();

        $groupBy = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $distinctCount = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $sumColumn = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $sortField = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageGroupByRootParameter::class);

        $descending = $request->boolean('descending');

        $hideUnknown = $request->boolean('hideUnknown');

        $responseFormat = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\AggregatedFilteredUsageResponseFormatParameter::class);

        $l = $request->integer('l');

        $limit = $request->integer('limit');

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');


        $apiResult = $this->api->filteredUsage($deviceId, $accountId, $applicationId, $appKey, $startDate, $endDate, $deviceType, $device, $deviceOS, $gender, $ageGroup, $country, $state, $city, $zip, $model, $tag, $userAccountId, $userAccountDisplay, $userAccountUsername, $customId, $customType, $customValue, $customValue2, $customLong, $customLong2, $customMessage, $customMessage2, $groupBy, $distinctCount, $sumColumn, $sortField, $descending, $hideUnknown, $responseFormat, $l, $limit, $latitude, $longitude);

        if ($apiResult instanceof \OpenAPI\Server\Model\ChartData) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation usage
     *
     * Create Usage Record.
     *
     */
    public function usage(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'tag' => [
                    'required',
                    'string',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'applicationId' => [
                    'integer',
                ],
                'appKey' => [
                    'string',
                ],
                'appVersion' => [
                    'string',
                ],
                'device' => [
                    'string',
                ],
                'deviceType' => [
                    'string',
                ],
                'deviceOS' => [
                    'string',
                ],
                'model' => [
                    'string',
                ],
                'latitude' => [
                ],
                'longitude' => [
                ],
                'customId' => [
                    'integer',
                ],
                'customType' => [
                    'string',
                ],
                'achievementIncrement' => [
                    'integer',
                ],
                'city' => [
                    'string',
                ],
                'state' => [
                    'string',
                ],
                'country' => [
                    'string',
                ],
                'zip' => [
                    'string',
                ],
                'locationDescription' => [
                    'string',
                ],
                'clientTime' => [
                    'integer',
                ],
                'errorMessage' => [
                    'string',
                ],
                'ip' => [
                    'string',
                ],
                'userAgent' => [
                    'string',
                ],
                'backgroundEvent' => [
                    'boolean',
                ],
                'customMessage' => [
                    'string',
                ],
                'customMessage2' => [
                    'string',
                ],
                'customValue' => [
                ],
                'customValue2' => [
                ],
                'customLong' => [
                    'integer',
                ],
                'customLong2' => [
                    'integer',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $tag = $request->string('tag')->value();

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $applicationId = $request->integer('applicationId');

        $appKey = $request->string('appKey')->value();

        $appVersion = $request->string('appVersion')->value();

        $device = $request->string('device')->value();

        $deviceType = $request->string('deviceType')->value();

        $deviceOS = $request->string('deviceOS')->value();

        $model = $request->string('model')->value();

        $latitude = $request->float('latitude');

        $longitude = $request->float('longitude');

        $customId = $request->integer('customId');

        $customType = $request->string('customType')->value();

        $achievementIncrement = $request->integer('achievementIncrement');

        $city = $request->string('city')->value();

        $state = $request->string('state')->value();

        $country = $request->string('country')->value();

        $zip = $request->string('zip')->value();

        $locationDescription = $request->string('locationDescription')->value();

        $clientTime = $request->integer('clientTime');

        $errorMessage = $request->string('errorMessage')->value();

        $ip = $request->string('ip')->value();

        $userAgent = $request->string('userAgent')->value();

        $backgroundEvent = $request->boolean('backgroundEvent');

        $customMessage = $request->string('customMessage')->value();

        $customMessage2 = $request->string('customMessage2')->value();

        $customValue = $request->float('customValue');

        $customValue2 = $request->float('customValue2');

        $customLong = $request->integer('customLong');

        $customLong2 = $request->integer('customLong2');


        $apiResult = $this->api->usage($tag, $deviceId, $accountId, $applicationId, $appKey, $appVersion, $device, $deviceType, $deviceOS, $model, $latitude, $longitude, $customId, $customType, $achievementIncrement, $city, $state, $country, $zip, $locationDescription, $clientTime, $errorMessage, $ip, $userAgent, $backgroundEvent, $customMessage, $customMessage2, $customValue, $customValue2, $customLong, $customLong2);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation usageBatch
     *
     * Create Multiple Usage Records.
     *
     */
    public function usageBatch(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'appKey' => [
                    'required',
                    'string',
                ],
                'device' => [
                    'required',
                    'string',
                ],
                'data' => [
                    'required',
                    'string',
                ],
                'deviceId' => [
                    'string',
                ],
                'accountId' => [
                    'integer',
                ],
                'appVersion' => [
                    'string',
                ],
                'deviceType' => [
                    'string',
                ],
                'deviceOS' => [
                    'string',
                ],
                'model' => [
                    'string',
                ],
                'updateRanking' => [
                    'boolean',
                ],
                'returnSummaryResponse' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $appKey = $request->string('appKey')->value();

        $device = $request->string('device')->value();

        $data = $request->string('data')->value();

        $deviceId = $request->string('deviceId')->value();

        $accountId = $request->integer('accountId');

        $appVersion = $request->string('appVersion')->value();

        $deviceType = $request->string('deviceType')->value();

        $deviceOS = $request->string('deviceOS')->value();

        $model = $request->string('model')->value();

        $updateRanking = $request->boolean('updateRanking');

        $returnSummaryResponse = $request->boolean('returnSummaryResponse');


        $apiResult = $this->api->usageBatch($appKey, $device, $data, $deviceId, $accountId, $appVersion, $deviceType, $deviceOS, $model, $updateRanking, $returnSummaryResponse);

        if ($apiResult instanceof \OpenAPI\Server\Model\SirqulResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
